(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00ed89e2","chunk-f771b2bc"],{"02d8":function(t,a,e){},"0712":function(t,a,e){"use strict";e("bce9")},"18dc":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t._self._c;return a("div",{staticClass:"dashboard-realtime-container"},[a("el-alert",{attrs:{title:t.$t("domainTable.title"),description:t.$t("dashboard.descPerApp"),type:"info","show-icon":""}}),a("LiveTime",{attrs:{statis:t.statis}}),a("Dis",{attrs:{data:t.disData,showDomainData:t.showDomainData}}),a("NoBindTip")],1)},s=[],i=(e("8e6e"),e("ac6a"),e("456d"),e("f559"),e("bd86")),r=e("4360"),c=e("2f62"),o=e("8595"),d=e("284a"),l=e("fe08"),u=e("6be8"),f=e("9a09"),p=e("2774"),m=e("b352");function h(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function b(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?h(Object(e),!0).forEach((function(a){Object(i["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var _=void 0,D={name:"liveData",components:{Dis:p["a"],NoBindTip:f["a"],LiveTime:m["a"]},data:function(){return{remainTrafficFlag:!0,showDomainData:!1,statis:{whiteList:!1,type:{product_type:0,time:""},online:0,traffic_p2p:{num:0,unit:"KB"},traffic_http:{num:0,unit:"KB"},traffic_share:{num:0,unit:"KB"},frequency_day:0,num_max:0,rebuffer_ratio:-1,flow:{remain:0,daily_remain:0,totalRemain:0,free:{num:0,unit:"KB"},utc:0},clock:null,traffic_p2p_day:0,traffic_http_day:0},disData:{versionData:[],tagData:[],deviceData:[],liveData:[],netTypeData:[],continentData:[],domainData:[],natTypeData:[]}}},computed:b({},Object(c["b"])(["currentDomain","device","language"])),watch:{currentDomain:function(){"undefined"===typeof this.$route.params.hostId&&(clearInterval(_),this.getUserDomain())}},mounted:function(){this.$store.dispatch("toggleSwitchDomain",!0);var t=this.$route.params,a=t.domainInfo;a&&a.id&&a.uid?(this.loopGetData(a.uid,a.id,t.hostId),this.getDisData(a,t.hostId,!0),r["a"].dispatch("setCurrentDomain",a)):this.getUserDomain()},beforeDestroy:function(){clearInterval(_),this.$store.dispatch("toggleSwitchDomain",!1)},methods:{formatTraffic:u["d"],getData:function(t,a,e){var n,s=this;n=e>=0?function(){return Object(d["f"])(t,e)}:function(){return Object(o["c"])(t,a)},n().then((function(t){var a=t.data;s.statis.online=a.num_rt,s.statis.traffic_p2p_day=a.traffic_p2p_day,s.statis.traffic_http_day=a.traffic_http_day,s.statis.traffic_p2p=Object(u["d"])(a.traffic_p2p_day),s.statis.traffic_http=Object(u["d"])(a.traffic_http_day),s.statis.traffic_share=Object(u["d"])(a.traffic_share_day),s.statis.frequency_day=a.api_frequency_day,0!==a.total_rebuffers&&0!==a.total_media_requests?s.statis.rebuffer_ratio=a.total_rebuffers/a.total_media_requests:s.statis.rebuffer_ratio=-1,s.statis.num_max=a.num_max,s.statis.flow.remain=a.flow.remain,s.statis.flow.daily_remain=a.flow.daily_remain,s.statis.flow.totalRemain=a.flow.daily_remain+a.flow.remain,s.statis.flow.free=Object(u["d"])(a.flow.free),s.statis.flow.utc=a.flow.utc,s.statis.whiteList=a.whitelist,s.statis.type.product_type=a.flow.product_type,s.statis.type.time=a.flow.duetime,s.statis.clock=a.clock,0===a.flow.free&&0===a.flow.remain&&0===a.flow.daily_remain&&s.remainTrafficFlag&&!a.whitelist&&(s.$messageBox.confirm(s.$t("dashboard.trafficUseOut"),{distinguishCancelAndClose:!0,confirmButtonText:s.$t("package.buyFlow"),cancelButtonText:s.$t("package.buyMonthly")}).then((function(){s.$router.push("/shopping/package")})).catch((function(t){"cancel"===t?s.$router.push("/shopping/monthly_package"):console.log("-")})),s.remainTrafficFlag=!1)})).catch((function(t){console.log(t)}))},getDisData:function(t,a){var e,n,s=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.uid,c=t.id;(e=a>=0?function(t){return Object(d["e"])(r,a,t)}:function(t){return Object(o["a"])(r,c,t)},e("version").then((function(t){var a=t.data.data;s.disData.versionData=a?Object(u["c"])(a):[]})),e("tag").then((function(t){var a=t.data.data;s.disData.tagData=a?Object(u["c"])(a):[]})),e("device").then((function(t){var a=t.data.data;s.disData.deviceData=a?Object(u["c"])(a):[]})),e("live").then((function(t){var a=t.data.data;s.disData.liveData=a?Object(u["c"])(a):[]})),e("netType").then((function(t){var a=t.data.data;s.disData.netTypeData=a?Object(u["c"])(a):[]})),e("continent").then((function(t){var a=t.data.data;s.disData.continentData=a?Object(u["c"])(a):[]})),e("nat").then((function(t){var a=t.data.data;s.disData.natTypeData=a?Object(u["c"])(a):[]})),t.domain.startsWith("shadow@"))?(this.showDomainData=!0,n=i?function(t){return Object(l["d"])(t)}:function(t){return Object(l["b"])(t)},n(r).then((function(t){var a=t.data;s.disData.domainData=a?Object(u["c"])(a):[]}))):(this.disData.domainData=[],this.showDomainData=!1)},loopGetData:function(t,a,e){var n=this;this.getData(t,a,e),clearInterval(_),_=setInterval((function(){n.getData(t,a,e)}),2e4)},getUserDomain:function(){this.currentDomain.id&&(this.loopGetData(this.currentDomain.uid,this.currentDomain.id),this.getDisData(this.currentDomain))}}},g=D,y=(e("90da"),e("2877")),O=Object(y["a"])(g,n,s,!1,null,null,null);a["default"]=O.exports},"21e1":function(t,a,e){"use strict";e("ed53")},2774:function(t,a,e){"use strict";var n=function(){var t=this,a=t._self._c;return a("el-row",{attrs:{gutter:20}},[t.showDomainData?a("el-col",{staticClass:"chart-col",attrs:{xs:24,sm:12,lg:8}},[a("pie-card",{attrs:{title:t.$t("dashboard.domainDis"),data:t.data.domainData}})],1):t._e(),a("el-col",{staticClass:"chart-col",attrs:{xs:24,sm:12,lg:8}},[a("pie-card",{attrs:{title:t.$t("dashboard.versionDis"),data:t.data.versionData}})],1),a("el-col",{staticClass:"chart-col",attrs:{xs:24,sm:12,lg:8}},[a("pie-card",{attrs:{title:t.$t("dashboard.tagDis"),data:t.data.tagData}})],1),!1===t.currentDomain.native?a("el-col",{staticClass:"chart-col",attrs:{xs:24,sm:12,lg:8}},[a("pie-card",{attrs:{title:t.$t("dashboard.terminalDis"),data:t.data.deviceData}})],1):t._e(),a("el-col",{staticClass:"chart-col",attrs:{xs:24,sm:12,lg:8}},[a("pie-card",{attrs:{title:t.$t("dashboard.liveDis"),data:t.data.liveData}})],1),a("el-col",{staticClass:"chart-col",attrs:{xs:24,sm:12,lg:8}},[a("pie-card",{attrs:{title:t.$t("dashboard.netDis"),data:t.data.netTypeData}})],1),a("el-col",{staticClass:"chart-col",attrs:{xs:24,sm:12,lg:8}},[a("pie-card",{attrs:{title:t.$t("dashboard.continentDis"),data:t.data.continentData}})],1),t.currentDomain.native?a("el-col",{staticClass:"chart-col",attrs:{xs:24,sm:12,lg:8}},[a("pie-card",{attrs:{title:t.$t("dashboard.natDis"),data:t.data.natTypeData}})],1):t._e()],1)},s=[],i=(e("8e6e"),e("ac6a"),e("456d"),e("bd86")),r=e("d9d8"),c=e("2f62");function o(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?o(Object(e),!0).forEach((function(a){Object(i["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var l={name:"Distribution",components:{PieCard:r["a"]},computed:d({},Object(c["b"])(["currentDomain"])),props:{showDomainData:{type:Boolean,default:!1},data:{type:Object,required:!0,default:{versionData:[],tagData:[],deviceData:[],liveData:[],netTypeData:[],continentData:[],domainData:[],natTypeData:[]}}}},u=l,f=(e("7746"),e("2877")),p=Object(f["a"])(u,n,s,!1,null,"1fca38c8",null);a["a"]=p.exports},"299b":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t._self._c;return a("div",{staticClass:"dashboard-container"},[a(t.currentRole,{tag:"component"})],1)},s=[],i=(e("8e6e"),e("ac6a"),e("456d"),e("6762"),e("2fdb"),e("bd86")),r=e("2f62"),c=function(){var t=this,a=t._self._c;return a("div",{staticClass:"dashboard-editor-container"},[a("PanelGroup")],1)},o=[],d=function(){var t=this,a=t._self._c;return a("el-row",{staticClass:"panel-group",attrs:{gutter:20}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.online,duration:500,desc:"当前在线人数",color:t.statis.online>5e5?"red":""}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.bandwidth_p2p.num,duration:500,decimals:2,desc:"当前P2P带宽(".concat(t.statis.bandwidth_p2p.unit,")")}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.bandwidth_http.num,duration:500,decimals:2,desc:"当前HTTP带宽(".concat(t.statis.bandwidth_http.unit,")")}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.p2p_rate,duration:500,decimals:2,desc:"当前P2P效率(%)",color:t.statis.p2p_rate<30?"red":""}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.bandwidth_share.num,duration:500,decimals:2,desc:"当前上行带宽(".concat(t.statis.bandwidth_http.unit,")")}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.traffic_p2p.num,duration:500,decimals:2,desc:"今日P2P流量(".concat(t.statis.traffic_p2p.unit,")")}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.traffic_http.num,duration:500,decimals:2,desc:"今日HTTP流量(".concat(t.statis.traffic_http.unit,")")}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.traffic_share.num,duration:500,decimals:2,desc:"今日上行流量(".concat(t.statis.traffic_http.unit,")")}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.shareEfficiency,duration:500,decimals:2,desc:"当前分享效率(%)"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.frequency_day,duration:500,desc:"今日服务次数"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.hostNum,duration:500,desc:"近30分钟活跃网站/APP数"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.max_online,duration:500,desc:"历史最高在线人数"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.num_channel,duration:500,desc:"频道总数"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.num_tracker,duration:500,desc:"当前Tracker实例数"}})],1),a("el-col",{staticClass:"card-panel-col",attrs:{xs:24,sm:12,lg:6}},[a("card",{attrs:{num:t.statis.num_pending_invoice,duration:500,desc:"待开发票数"}})],1)],1)},l=[],u=(e("c5f6"),e("284a")),f=e("a877"),p=e("6be8"),m=e("12f9"),h=void 0,b={name:"PanelGroup",components:{Card:m["a"]},data:function(){return{statis:{online:0,max_online:0,num_channel:0,num_tracker:0,num_pending_invoice:0,p2p_rate:0,hostNum:0,bandwidth_p2p:{num:0,unit:"kbps"},bandwidth_http:{num:0,unit:"kbps"},bandwidth_share:{num:0,unit:"kbps"},traffic_p2p:{num:0,unit:"KB"},traffic_http:{num:0,unit:"KB"},traffic_share:{num:0,unit:"KB"},frequency_day:0}}},created:function(){var t=this;this.getData(),h=setInterval((function(){t.getData()}),2e4)},destroyed:function(){clearInterval(h)},computed:{shareEfficiency:{get:function(){return this.statis.bandwidth_p2p.num/this.statis.bandwidth_share.num*100}}},methods:{getData:function(){var t=this;Object(u["c"])().then((function(a){var e=a.data;t.statis.online=e.num_rt,t.statis.max_online=e.max_num,t.statis.num_channel=e.num_channel,t.statis.num_tracker=e.num_tracker,t.statis.num_pending_invoice=e.num_pending_invoice,t.statis.bandwidth_p2p=Object(p["a"])(e.rt_bw_p2p),t.statis.bandwidth_share=Object(p["a"])(e.rt_bw_share),t.statis.bandwidth_http=Object(p["a"])(e.rt_bw_http),t.statis.p2p_rate=Number((100*e.p2p_rate_rt).toFixed(2)),t.statis.traffic_p2p=Object(p["d"])(e.traffic_p2p_day),t.statis.traffic_http=Object(p["d"])(e.traffic_http_day),t.statis.traffic_share=Object(p["d"])(e.traffic_share_day),t.statis.frequency_day=e.api_frequency_day,t.$emit("numChange",e.num_rt)})).catch((function(t){console.log(t)})),Object(f["k"])().then((function(a){t.statis.hostNum=a.data.num}))}}},_=b,D=(e("21e1"),e("2877")),g=Object(D["a"])(_,d,l,!1,null,"aaca241a",null),y=g.exports,O={name:"Dashboard",components:{PanelGroup:y}},v=O,w=(e("0712"),Object(D["a"])(v,c,o,!1,null,null,null)),j=w.exports,P=e("18dc");function x(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function C(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?x(Object(e),!0).forEach((function(a){Object(i["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):x(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var T={name:"Dashboard",components:{adminDashboard:j,userDashboard:P["default"]},data:function(){return{currentRole:"adminDashboard"}},computed:C({},Object(r["b"])(["roles"])),created:function(){this.roles.includes("admin")||(this.currentRole="userDashboard")}},k=T,$=Object(D["a"])(k,n,s,!1,null,null,null);a["default"]=$.exports},7746:function(t,a,e){"use strict";e("02d8")},"90da":function(t,a,e){"use strict";e("e6e5")},bce9:function(t,a,e){},e6e5:function(t,a,e){},ed53:function(t,a,e){},f559:function(t,a,e){"use strict";var n=e("5ca1"),s=e("9def"),i=e("d2c8"),r="startsWith",c=""[r];n(n.P+n.F*e("5147")(r),"String",{startsWith:function(t){var a=i(this,t,r),e=s(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),n=String(t);return c?c.call(a,n,e):a.slice(e,e+n.length)===n}})}}]);