{"version":3,"sources":["webpack:///./src/api/liveData.js","webpack:///./src/views/dashboard/admin/OverallData.vue","webpack:///src/views/dashboard/admin/OverallData.vue","webpack:///./src/views/dashboard/admin/OverallData.vue?f9a4","webpack:///./src/views/dashboard/admin/OverallData.vue?b879","webpack:///./src/views/dashboard/admin/OverallData.vue?5ada"],"names":["fetchLiveTimeData","request","url","method","fetchOverallData","fetchLiveData","type","opts","country","fetchHotChannels","page","pageSize","render","_vm","this","_c","_self","staticClass","attrs","statis","max_online_week","bandwidth_p2p_week","num","unit","_f","p2p_rate_week","frequency_week","max_online_month","traffic_p2p_month","bandwidth_p2p_month","p2p_rate_month","frequency_month","staticRenderFns","name","components","Card","data","mounted","_this","destroyed","methods","getData","catch","console","fetchHostNum","component"],"mappings":"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","file":"js/chunk-67605b95.88bd51d4.js","sourcesContent":["import request from '@/utils/request'\n\n// 全局数据接口\nexport function fetchGlobalData() {\n  return request({\n    url: 'global',\n    method: 'get',\n  })\n}\n\n// livetime接口\nexport function fetchLiveTimeData() {\n    return request({\n        url: 'global/livetime',\n        method: 'get',\n    })\n}\n\n// overall接口\nexport function fetchOverallData() {\n    return request({\n        url: 'global/overall',\n        method: 'get',\n    })\n}\n\nexport function fetchLiveData(type, opts) {\n    let url =`global/num?type=${type}`\n    if (opts && opts.country) {\n        url = `${url}&country=${opts.country}`\n    }\n    return request({\n    url,\n    method: 'get'\n  })\n}\n\n// 全局热门频道\nexport function fetchHotChannels(page, pageSize) {\n    let url = `global/channel?page=${page}&page_size=${pageSize}`\n    return request({\n        url,\n        method: 'get'\n    })\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"dashboard-overall-container\"},[_c('el-row',{staticClass:\"panel-group\",attrs:{\"gutter\":20}},[_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm.statis.max_online_week,\"desc\":\"过去七天最高在线人数\"}})],1),_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm.statis.bandwidth_p2p_week.num,\"desc\":`过去七天P2P带宽峰值(${ _vm.statis.bandwidth_p2p_week.unit })`}})],1),_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm._f(\"positive\")(_vm.statis.p2p_rate_week),\"decimals\":2,\"desc\":\"过去七天P2P分享率(%)\"}})],1),_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm.statis.frequency_week,\"desc\":\"过去七天服务人数\"}})],1),_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm.statis.max_online_month,\"desc\":\"近1月最高在线人数\"}})],1),_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm.statis.traffic_p2p_month.num,\"decimals\":2,\"desc\":`近1月P2P流量(${ _vm.statis.traffic_p2p_month.unit })`}})],1),_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm.statis.bandwidth_p2p_month.num,\"decimals\":2,\"desc\":`近1月P2P带宽峰值(${ _vm.statis.bandwidth_p2p_month.unit })`}})],1),_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm.statis.p2p_rate_month,\"decimals\":2,\"desc\":\"近1月P2P分享率(%)\"}})],1),_c('el-col',{staticClass:\"card-panel-col\",attrs:{\"xs\":24,\"sm\":12,\"lg\":6}},[_c('card',{attrs:{\"num\":_vm.statis.frequency_month,\"desc\":\"近1月服务人数\"}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dashboard-overall-container\">\n    <el-row :gutter=\"20\" class=\"panel-group\">\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.max_online_week\"\n              desc=\"过去七天最高在线人数\">\n        </card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.bandwidth_p2p_week.num\"\n              :desc=\"`过去七天P2P带宽峰值(${ statis.bandwidth_p2p_week.unit })`\">\n        </card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.p2p_rate_week | positive\"\n              :decimals=\"2\"\n              desc=\"过去七天P2P分享率(%)\">\n        </card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.frequency_week\"\n              desc=\"过去七天服务人数\">\n        </card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.max_online_month\"\n              desc=\"近1月最高在线人数\">\n        </card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.traffic_p2p_month.num\"\n              :decimals=\"2\"\n              :desc=\"`近1月P2P流量(${ statis.traffic_p2p_month.unit })`\">\n        </card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.bandwidth_p2p_month.num\"\n              :decimals=\"2\"\n              :desc=\"`近1月P2P带宽峰值(${ statis.bandwidth_p2p_month.unit })`\">\n        </card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.p2p_rate_month\"\n              :decimals=\"2\"\n              desc=\"近1月P2P分享率(%)\">\n        </card>\n      </el-col>\n\n      <el-col :xs=\"24\" :sm=\"12\" :lg=\"6\" class=\"card-panel-col\">\n        <card :num=\"statis.frequency_month\"\n              desc=\"近1月服务人数\">\n        </card>\n      </el-col>\n\n    </el-row>\n  </div>\n</template>\n\n<script>\n    import { fetchOverallData } from '@/api/liveData'\n    import { fetchHostNum } from '@/api/userDomain'\n    import { formatBandwidth, formatTraffic } from '@/utils/format'\n    import Card from '@/components/Card'\n\n    export default {\n        name: 'OverallData',\n        components: {\n          Card,\n        },\n        data() {\n            return {\n                statis: {\n                    max_online_week: 0,\n                    max_online_month: 0,\n\n                    p2p_rate_week: 0,\n                    p2p_rate_month: 0,\n\n                    bandwidth_p2p_week: {\n                        num: 0,\n                        unit: 'kbps'\n                    },\n                    bandwidth_p2p_month: {\n                        num: 0,\n                        unit: 'kbps'\n                    },\n                    traffic_p2p_month: {\n                        num: 0,\n                        unit: 'KB'\n                    },\n\n                    frequency_week: 0,\n                    frequency_month: 0\n                }\n            }\n        },\n        mounted() {\n            const _this = this\n            _this.getData()\n        },\n        destroyed() {\n            // clearInterval(int)\n        },\n        methods: {\n            getData() {\n                fetchOverallData().then(res => {\n                    const { data } = res\n                    this.statis.max_online_week = data.max_num_7\n                    this.statis.max_online_month = data.max_num_month\n                    this.statis.bandwidth_p2p_week = formatBandwidth(data.bwp_p2p_7)\n                    this.statis.bandwidth_p2p_month = formatBandwidth(data.bwp_p2p_month)\n                    this.statis.p2p_rate_week = Number((data.p2p_rate_7 * 100).toFixed(2))\n                    this.statis.p2p_rate_month = Number((data.p2p_rate_month * 100).toFixed(2))\n                    this.statis.traffic_p2p_month = formatTraffic(data.traffic_p2p_30)\n                    this.statis.frequency_week = data.api_frequency_7\n                    this.statis.frequency_month = data.api_frequency_30\n                    this.$emit('numChange', data.num_rt)\n                    //接入网站总数\n                }).catch(err => {\n                    console.log(err)\n                })\n                fetchHostNum().then(res => {\n                    this.statis.hostNum = res.data.num\n                })\n            }\n        }\n    }\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.dashboard-overall-container {\n  padding: 4px 25px;\n  background-color: rgb(240, 242, 245);\n  min-height: calc(100vh - 84px);\n  .panel-group {\n    margin-top: 18px;\n    .card-panel-col{\n      margin-bottom: 20px;\n    }\n    .card-panel {\n      height: 108px;\n      font-size: 12px;\n      position: relative;\n      overflow: hidden;\n      color: #666;\n      background: #fff;\n      box-shadow: 4px 4px 40px rgba(0, 0, 0, .05);\n      border-color: rgba(0, 0, 0, .05);\n      .card-panel-description {\n        text-align: right;\n        line-height: 42px;\n        font-weight: bold;\n        margin: 26px;\n        margin-left: 0;\n        .card-panel-text {\n          line-height: 18px;\n          color: rgba(0, 0, 0, 0.45);\n          font-size: 16px;\n        }\n        .card-panel-num {\n          font-size: 24px;\n        }\n      }\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverallData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverallData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OverallData.vue?vue&type=template&id=490ff7c0&scoped=true&\"\nimport script from \"./OverallData.vue?vue&type=script&lang=js&\"\nexport * from \"./OverallData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OverallData.vue?vue&type=style&index=0&id=490ff7c0&prod&rel=stylesheet%2Fscss&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"490ff7c0\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverallData.vue?vue&type=style&index=0&id=490ff7c0&prod&rel=stylesheet%2Fscss&lang=scss&scoped=true&\""],"sourceRoot":""}