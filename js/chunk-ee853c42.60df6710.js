(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee853c42"],{7983:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[t("el-col",{attrs:{xs:24,sm:12,lg:6}},[t("el-input",{staticClass:"filter-item",attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入域名或UID"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.keywordsChange.apply(null,arguments)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),t("el-col",{attrs:{xs:8,sm:12,lg:2}},[t("el-checkbox",{on:{change:e.showWhitelistChange},model:{value:e.showWhite,callback:function(t){e.showWhite=t},expression:"showWhite"}},[e._v("白名单")])],1),t("el-col",{attrs:{xs:8,sm:12,lg:2}},[t("el-checkbox",{on:{change:e.showBlacklistChange},model:{value:e.showBlack,callback:function(t){e.showBlack=t},expression:"showBlack"}},[e._v("黑名单")])],1),t("el-col",{attrs:{xs:8,sm:12,lg:2}},[t("el-checkbox",{on:{change:e.showDebugChange},model:{value:e.showDebug,callback:function(t){e.showDebug=t},expression:"showDebug"}},[e._v("Debug")])],1),t("el-col",{attrs:{xs:8,sm:12,lg:4}},[t("el-checkbox",{on:{change:e.showNativeChange},model:{value:e.showNative,callback:function(t){e.showNative=t},expression:"showNative"}},[e._v("Native")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"filter-change":e.tableFilter}},[t("el-table-column",{attrs:{align:"center",prop:"id",label:"ID"}}),t("el-table-column",{attrs:{align:"center",label:"域名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[t("a",{on:{click:function(t){return e.hostClick(a.row.domain)}}},[e._v(e._s(a.row.domain))])])]}}])}),t("el-table-column",{attrs:{align:"center",prop:"uid",label:"UID"}}),t("el-table-column",{attrs:{align:"center",label:"是否绑定"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.isValid?"已绑定":"未绑定"))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"黑名单"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{ref:"popover-"+a.row.id,attrs:{trigger:"manual",placement:"top",width:"160"}},[t("p",[e._v(e._s(a.row.blocked?"确认从黑名单中移除吗？":"确定加入黑名单吗？"))]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.pClose(a.row.id)}}},[e._v(e._s(e.$t("common.cancel")))]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.blacklistChange(a.row)}}},[e._v(e._s(e.$t("common.ok")))])],1),t("el-switch",{attrs:{slot:"reference",value:a.row.blocked,"active-color":"red"},on:{change:function(t){return e.pShow(a.row.id)}},slot:"reference"})],1)]}}])}),t("el-table-column",{attrs:{align:"center",label:"白名单"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{ref:"popover-"+a.row.domain,attrs:{trigger:"manual",placement:"top",width:"160"}},[t("p",[e._v(e._s(a.row.whitelist?"确认从白名单中移除吗？":"确定加入白名单吗？"))]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.pClose(a.row.domain)}}},[e._v(e._s(e.$t("common.cancel")))]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.whiteListChange(a.row)}}},[e._v(e._s(e.$t("common.ok")))])],1),t("el-switch",{attrs:{slot:"reference",value:a.row.whitelist,"active-color":"green"},on:{change:function(t){return e.pShow(a.row.domain)}},slot:"reference"})],1)]}}])}),t("el-table-column",{attrs:{align:"center",label:"Debug"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{slot:"reference",value:a.row.debug,"active-color":"green"},on:{change:function(t){return e.debugChange(a.row)}},slot:"reference"})]}}])}),t("el-table-column",{attrs:{label:"action",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleCheckDetail(a.row)}}},[e._v("监控")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handlePlayUrl(a.row)}}},[e._v("介绍")])]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{small:"mobile"===e.device,layout:"mobile"===e.device?"prev, pager, next":"sizes, prev, pager, next","page-sizes":[10,20,50,100],"page-size":e.tableParam.pageSize,"current-page":e.tableParam.page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[],o=(a("8e6e"),a("456d"),a("f559"),a("c5f6"),a("7f7f"),a("ac6a"),a("bd86")),l=a("a877"),s=a("2f62"),r=a("5f87");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={name:"DomainList",data:function(){return{loading:!1,showWhite:!1,showBlack:!1,showDebug:!1,showNative:!1,tableData:[],tableParam:{page:1,pageSize:10},searchValue:""}},computed:u({},Object(s["b"])(["device"])),mounted:function(){this.resetFilters(),this.fetchTableData()},methods:{pShow:function(e){this.$refs["popover-"+e].doShow()},pClose:function(e){this.$refs["popover-"+e].doClose()},hostClick:function(e){window.open("http://".concat(e)),window.open("https://".concat(e))},blacklistChange:function(e){var t=this;if(console.warn(JSON.stringify(e)),e.whitelist&&!e.blocked)return this.pClose(e.id),void this.$message({message:"不能同时添加到白名单和黑名单",type:"error"});var a={domain:e.domain,uid:e.uid,blocked:!e.blocked};this.loading=!0,Object(l["b"])(a).then((function(a){t.pClose(e.id),t.tableData.forEach((function(t){t.id===e.id&&(t.blocked=!t.blocked)})),t.$message({message:e.blocked?"成功添加至黑名单":"已从黑名单中移除",type:"success"}),t.loading=!1})).catch((function(e){t.loading=!1}))},whiteListChange:function(e){var t=this;if(!e.whitelist&&e.blocked)return this.pClose(e.domain),void this.$message({message:"不能同时添加到白名单和黑名单",type:"error"});var a={domain:e.domain,uid:e.uid,whitelist:!e.whitelist};this.loading=!0,Object(l["q"])(a).then((function(a){t.pClose(e.domain),t.tableData.forEach((function(t){t.id===e.id&&(t.whitelist=!t.whitelist)})),t.$message({message:e.whitelist?"成功添加至白名单":"已从白名单中移除",type:"success"}),t.loading=!1})).catch((function(e){t.loading=!1}))},debugChange:function(e){var t=this,a={domain:e.domain,uid:e.uid,debug:!e.debug};this.loading=!0,Object(l["f"])(a).then((function(a){t.tableData.forEach((function(t){t.id===e.id&&(t.debug=!t.debug)})),t.$message({message:e.debug?"开启debug":"关闭debug",type:"success"}),t.loading=!1})).catch((function(e){t.loading=!1}))},tableFilter:function(){this.fetchTableData()},showWhitelistChange:function(e){this.filters.forEach((function(t){"whitelist"===t.name&&(t.value=e)})),this.fetchTableData()},showBlacklistChange:function(e){this.filters.forEach((function(t){"blocked"===t.name&&(t.value=e)})),this.fetchTableData()},showDebugChange:function(e){this.filters.forEach((function(t){"debug"===t.name&&(t.value=e)})),this.fetchTableData()},showNativeChange:function(e){this.filters.forEach((function(t){"native"===t.name&&(t.value=e)})),this.fetchTableData()},keywordsChange:function(e){var t=e.target.value.trim();isNaN(Number(t))?this.filters.forEach((function(e){"keywords"===e.name&&(e.value=t||!1)})):this.filters.forEach((function(e){"uid"===e.name&&(e.value=t)})),this.fetchTableData()},fetchTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableParam.page,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableParam.pageSize,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.filters;this.loading=!0,Object(l["i"])(t,a,n).then((function(t){e.loading=!1,e.tableData=t.data})).catch((function(t){e.tableData=[],e.loading=!1}))},handleSizeChange:function(e){this.tableParam.pageSize=e,this.fetchTableData()},handleCurrentChange:function(e){this.tableParam.page=e,this.fetchTableData()},selectChange:function(e){this.fetchTableData()},handleCheckDetail:function(e){this.$router.push({name:"UserLiveData",params:{hostId:e.id,domainInfo:{uid:Object(r["a"])(),id:-1,native:e.native,domain:e.domain}}})},handlePlayUrl:function(e){var t=e.play_url;t.startsWith("http")||(t="http://"+t),window.open("".concat(t))},resetFilters:function(){this.filters=[{name:"blocked",value:!1},{name:"whitelist",value:!1},{name:"native",value:!1},{name:"debug",value:!1},{name:"keywords",value:!1},{name:"uid",value:!1}]}}},d=h,f=a("2877"),g=Object(f["a"])(d,n,i,!1,null,null,null);t["default"]=g.exports},f559:function(e,t,a){"use strict";var n=a("5ca1"),i=a("9def"),o=a("d2c8"),l="startsWith",s=""[l];n(n.P+n.F*a("5147")(l),"String",{startsWith:function(e){var t=o(this,e,l),a=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return s?s.call(t,n,a):t.slice(a,a+n.length)===n}})}}]);