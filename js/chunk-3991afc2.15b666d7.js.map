{"version":3,"sources":["webpack:///./src/views/userData/reviewDomainList.vue","webpack:///src/views/userData/reviewDomainList.vue","webpack:///./src/views/userData/reviewDomainList.vue?a772","webpack:///./src/views/userData/reviewDomainList.vue?72ac","webpack:///./node_modules/core-js/modules/es6.string.starts-with.js"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","loading","expression","staticStyle","attrs","tableData","scopedSlots","_u","key","fn","scope","on","$event","hostClick","row","domain","_v","_s","native","reviewing","reviewingChange","slot","blocked","blacklistChange","whitelist","whiteListChange","email","reviewClick","play_url","checkBeianClick","device","tableParam","pageSize","page","handleSizeChange","handleCurrentChange","staticRenderFns","data","showValid","showWhite","showBlack","showNative","searchValue","computed","mapGetters","mounted","methods","window","uid","blockDomain","then","item","message","type","catch","whiteDomain","reviewDomain","checkBeian","formatData","fetchTableData","fetchDomainUnderReview","component","$export","toLength","context","STARTS_WITH","$startsWith","P","F","startsWith","searchString","that","index","Math","min","arguments","length","undefined","search","String","call","slice"],"mappings":"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","file":"js/chunk-3991afc2.15b666d7.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app-container\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"域名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_c('a',{on:{\"click\":function($event){return _vm.hostClick(scope.row.domain)}}},[_vm._v(_vm._s(scope.row.domain))])])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"平台\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.native? 'native':'web'))])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"未审核\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"slot\":\"reference\",\"value\":scope.row.reviewing,\"active-color\":\"red\"},on:{\"change\":function($event){return _vm.reviewingChange(scope.row)}},slot:\"reference\"})]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"黑名单\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"slot\":\"reference\",\"value\":scope.row.blocked,\"active-color\":\"red\"},on:{\"change\":function($event){return _vm.blacklistChange(scope.row)}},slot:\"reference\"})]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"白名单\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"slot\":\"reference\",\"value\":scope.row.whitelist,\"active-color\":\"green\"},on:{\"change\":function($event){return _vm.whiteListChange(scope.row)}},slot:\"reference\"})]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"联系方式\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.email))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"action\",\"align\":\"center\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.reviewClick(scope.row.play_url)}}},[_vm._v(\"审核\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.checkBeianClick(scope.row.domain)}}},[_vm._v(\"备案\")])]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"small\":_vm.device === 'mobile',\"layout\":_vm.device === 'mobile' ? 'prev, pager, next' : 'sizes, prev, pager, next',\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.tableParam.pageSize,\"current-page\":_vm.tableParam.page},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"app-container\">\n        <el-table\n                :data=\"tableData\"\n                v-loading=\"loading\"\n                style=\"width: 100%\">\n            <el-table-column align=\"center\" label=\"域名\">\n                <template slot-scope=\"scope\">\n                    <span><a @click=\"hostClick(scope.row.domain)\">{{scope.row.domain}}</a></span>\n                </template>\n            </el-table-column>\n\n            <el-table-column align=\"center\" label=\"平台\">\n                <template slot-scope=\"scope\">\n                    <span>{{ scope.row.native? 'native':'web' }}</span>\n                </template>\n            </el-table-column>\n\n            <el-table-column align=\"center\" label=\"未审核\">\n                <template slot-scope=\"scope\">\n                    <el-switch slot=\"reference\" :value=\"scope.row.reviewing\" active-color=\"red\" @change=\"reviewingChange(scope.row)\"></el-switch>\n                </template>\n            </el-table-column>\n\n            <el-table-column align=\"center\" label=\"黑名单\">\n                <template slot-scope=\"scope\">\n                    <el-switch slot=\"reference\" :value=\"scope.row.blocked\" active-color=\"red\" @change=\"blacklistChange(scope.row)\"></el-switch>\n                </template>\n            </el-table-column>\n\n            <el-table-column align=\"center\" label=\"白名单\">\n                <template slot-scope=\"scope\">\n                    <el-switch slot=\"reference\" :value=\"scope.row.whitelist\" active-color=\"green\" @change=\"whiteListChange(scope.row)\"></el-switch>\n                </template>\n            </el-table-column>\n\n            <el-table-column align=\"center\" label=\"联系方式\">\n                <template slot-scope=\"scope\">\n                    <span>{{ scope.row.email }}</span>\n                </template>\n            </el-table-column>\n\n            <el-table-column label=\"action\" align=\"center\" class-name=\"small-padding fixed-width\">\n                <template slot-scope=\"scope\">\n                    <el-button type=\"primary\" size=\"mini\" @click=\"reviewClick(scope.row.play_url)\">审核</el-button>\n                    <el-button type=\"primary\" size=\"mini\" @click=\"checkBeianClick(scope.row.domain)\">备案</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <div class=\"pagination-container\">\n            <el-pagination\n                    :small=\"device === 'mobile'\"\n                    :layout=\"device === 'mobile' ? 'prev, pager, next' : 'sizes, prev, pager, next'\"\n                    :page-sizes=\"[10, 20, 50, 100]\"\n                    :page-size=\"tableParam.pageSize\"\n                    :current-page=\"tableParam.page\"\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\">\n            </el-pagination>\n        </div>\n    </div>\n</template>\n\n<script>\n    import { fetchDomainUnderReview, blockDomain, whiteDomain, reviewDomain, checkBeian } from '@/api/userDomain'\n    import { mapGetters } from 'vuex'\n    // import { getID } from '@/utils/auth'\n\n    export default {\n        data() {\n            return {\n                loading: false,\n                showValid: true,\n                showWhite: false,\n                showBlack: false,\n                showNative: false,\n                tableData: [],\n                tableParam: {\n                    page: 1,\n                    pageSize: 10\n                },\n\n                searchValue: '',\n            }\n        },\n        computed: {\n            ...mapGetters([\n                'device'\n            ])\n        },\n        mounted() {\n            this.fetchTableData()\n        },\n        methods: {\n            hostClick(value) {\n                window.open(`http://${value}`)\n                window.open(`https://${value}`)\n            },\n            reviewClick(value) {\n                // console.warn(`reviewClick ${value}`)\n                if (!value.startsWith('http')) {\n                    value = 'http://' + value\n                }\n                window.open(`${value}`)\n            },\n            blacklistChange(domain) {\n                if(domain.whitelist && !domain.blocked) {\n                    this.$message({\n                        message: '不能同时添加到白名单和黑名单',\n                        type: 'error'\n                    })\n                    return\n                }\n                const data = {\n                    domain: domain.domain,\n                    uid: domain.uid,\n                    blocked: !domain.blocked\n                }\n                this.loading = true\n                blockDomain(data)\n                    .then(res => {\n                        this.tableData.forEach(item => {\n                            if(item.id === domain.id)\n                                item.blocked = !item.blocked\n                        })\n                        this.$message({\n                            message: domain.blocked ? '成功添加至黑名单' : '已从黑名单中移除',\n                            type: 'success'\n                        })\n                        this.loading = false\n                    })\n                    .catch(err => {\n                        this.loading = false\n                    })\n            },\n            whiteListChange(domain) {\n                if(!domain.whitelist && domain.blocked) {\n                    this.$message({\n                        message: '不能同时添加到白名单和黑名单',\n                        type: 'error'\n                    })\n                    return\n                }\n                const data = {\n                    domain: domain.domain,\n                    uid: domain.uid,\n                    whitelist: !domain.whitelist\n                }\n                this.loading = true\n                whiteDomain(data)\n                    .then(res => {\n                        this.tableData.forEach(item => {\n                            if(item.id === domain.id)\n                                item.whitelist = !item.whitelist\n                        })\n                        this.$message({\n                            message: domain.whitelist ? '成功添加至白名单' : '已从白名单中移除',\n                            type: 'success'\n                        })\n                        this.loading = false\n                    })\n                    .catch(err => {\n                        this.loading = false\n                    })\n            },\n            reviewingChange(domain) {\n                const data = {\n                    domain: domain.domain,\n                    uid: domain.uid,\n                    reviewing: !domain.reviewing\n                }\n                this.loading = true\n                reviewDomain(data)\n                    .then(res => {\n                        this.tableData.forEach(item => {\n                            if(item.id === domain.id)\n                                item.reviewing = !item.reviewing\n                        })\n                        this.$message({\n                            message: domain.reviewing ? '正在审核' : '已审核',\n                            type: 'success'\n                        })\n                        this.loading = false\n                    })\n                    .catch(err => {\n                        this.loading = false\n                    })\n            },\n            checkBeianClick(domain) {\n                this.loading = true\n                checkBeian(domain)\n                    .then(res => {\n                        if (res.ret === 0) {\n                            const beianed = res.data.beianed\n                            if (beianed) {\n                                this.$message({\n                                    message: '已备案',\n                                    type: 'success'\n                                })\n                            } else {\n                                if (res.data.expired) {\n                                  this.$message({\n                                    message: '备案API过期',\n                                    type: 'error'\n                                  })\n                                } else {\n                                  this.$message({\n                                    message: '未备案',\n                                    type: 'error'\n                                  })\n                                }\n                            }\n                        } else {\n                            this.$message({\n                                message: res.data.msg,\n                                type: 'error'\n                            })\n                        }\n                        this.loading = false\n                    })\n                    .catch(err => {\n                        this.loading = false\n                    })\n            },\n            formatData(data) {\n                data.forEach(item => {\n                })\n                return data\n            },\n            fetchTableData(page=this.tableParam.page, pageSize=this.tableParam.pageSize) {\n                this.loading = true\n                fetchDomainUnderReview(page, pageSize).then(res => {\n                    this.loading = false\n                    this.tableData = this.formatData(res.data)\n                }).catch(err => {\n                    this.tableData = []\n                    this.loading = false\n                })\n            },\n            handleSizeChange(pageSize) {\n                this.tableParam.pageSize = pageSize\n                this.fetchTableData()\n            },\n            handleCurrentChange(page) {\n                this.tableParam.page = page\n                this.fetchTableData()\n            },\n        }\n    }\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reviewDomainList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reviewDomainList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reviewDomainList.vue?vue&type=template&id=707a3ad6&\"\nimport script from \"./reviewDomainList.vue?vue&type=script&lang=js&\"\nexport * from \"./reviewDomainList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n"],"sourceRoot":""}