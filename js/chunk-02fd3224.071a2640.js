(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02fd3224"],{"4d24":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-input",{staticStyle:{width:"350px","margin-right":"5px"},attrs:{placeholder:"worker pid, url or number"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("template",{slot:"prepend"},[t("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"Select"},slot:"prepend",model:{value:e.action,callback:function(t){e.action=t},expression:"action"}},[t("el-option",{attrs:{label:"Restart",value:"restart"}}),t("el-option",{attrs:{label:"Kill",value:"kill"}}),t("el-option",{attrs:{label:"Migrate",value:"copy"}}),t("el-option",{attrs:{label:"Workers",value:"ping"}}),t("el-option",{attrs:{label:"Limits",value:"limits"}})],1)],1)],2),t("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.doAction()}}},[e._v(e._s(e.$t("common.ok")))])],1),t("vue-json-pretty",{attrs:{showIcon:"",showLineNumber:"",showDoubleQuotes:!1,data:e.jsonData}})],1)},o=[],r=(n("28a5"),n("c5f6"),n("456d"),n("ac6a"),n("876d")),i=n("5f87"),c=n("6be8"),s=n("76f1"),u=n.n(s),d=(n("8a0d"),{name:"seederStats",components:{VueJsonPretty:u.a},mounted:function(){var e=this,t=this.$route.query,n=t.sid,a=t.admin;this.sid=n;var o=a?0:Object(i["a"])();this.getStats(o,n),this.timer=setInterval((function(){e.getStats(o,n)}),2e4)},methods:{copyTo:function(){var e=this,t=[],n=this.jsonData;n.workers&&Object.keys(n.workers).forEach((function(e){var a=n.workers[e];a.channelId&&t.push({channel:a.channelId,priority:a.priority,live:!a.isVod,keepAlive:a.keepAlive})})),this.loading=!0,Object(r["c"])(Object(i["a"])(),{infos:t,target:this.value}).then((function(){e.$notify({title:e.$t("common.success"),type:"success"}),e.value="",e.action=""})).finally((function(){e.loading=!1}))},doAction:function(){var e=this;if("copy"!==this.action){if(this.action){this.loading=!0;var t={action:this.action};if("ping"===this.action||"limits"===this.action)t.workers=Number(this.value);else{var n=this.value.split(" ").filter((function(e){return!!e})).map((function(e){return Number(e)}));1===n.length?t.pid=n[0]:t.pids=n}var a=this.$route.query.admin?r["b"]:r["a"],o=this.$route.query.admin?0:Object(i["a"])();a(o,this.sid,t).then((function(){e.$notify({title:e.$t("common.success"),type:"success"}),e.value="",e.action=""})).finally((function(){e.loading=!1}))}}else this.copyTo()},getStats:function(e,t){var n=this;this.loading=!0;var a=0===e?r["b"]:r["a"];a(e,t,{action:"stats"}).then((function(e){var t=JSON.parse(e.data),a=t.master,o=t.workers;a&&(a.memory=n.formatValue(a.memory),a.elapsed=Object(c["b"])(a.elapsed),a.averageUplink&&(a.averageUplink="".concat(Math.round(a.averageUplink),"Mbps"))),o&&Object.keys(o).forEach((function(e){var t=o[e];t.seedFrom&&(t.seedFrom=new Date(t.seedFrom),t.uploaded=n.formatValue(t.uploaded),t.downloaded=n.formatValue(t.downloaded)),t.averageUplink&&(t.averageUplink="".concat(Math.round(t.averageUplink),"Mbps")),t.diskCacheSize&&(t.diskCacheSize=n.formatValue(t.diskCacheSize)),t.memory&&(t.memory=n.formatValue(t.memory))})),n.jsonData=t})).finally((function(){n.loading=!1}))},formatValue:function(e){var t=Object(c["d"])(e);return"".concat(t.num).concat(t.unit)}},data:function(){return{loading:!1,action:"",sid:0,value:"",jsonData:{}}},beforeDestroy:function(){clearInterval(this.timer)}}),l=d,f=n("2877"),p=Object(f["a"])(l,a,o,!1,null,"4e5791f4",null);t["default"]=p.exports},"876d":function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"h",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"j",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n("b775");function o(e,t){return Object(a["a"])({url:"seeder/user_id/".concat(e),method:"post",data:t})}function r(e){return Object(a["a"])({url:"seeder/user_id/".concat(e),method:"get"})}function i(e,t){return Object(a["a"])({url:"seeder/user_id/".concat(e,"/seeder_id/").concat(t),method:"delete"})}function c(e,t,n){return Object(a["a"])({url:"seeder/user_id/".concat(e,"/seeder_id/").concat(t),method:"put",data:n})}function s(e,t,n){return Object(a["a"])({url:"seeder/user_id/".concat(e,"/seeder_id/").concat(t),method:"post",data:n})}function u(e,t){return Object(a["a"])({url:"seeder/user_id/".concat(e,"/copy"),method:"post",data:t})}function d(e,t){return Object(a["a"])({url:"seeder/admin/user_id/".concat(e),method:"post",data:t})}function l(e){return Object(a["a"])({url:"seeder/admin/user_id/".concat(e),method:"get"})}function f(e,t){return Object(a["a"])({url:"seeder/admin/user_id/".concat(e,"/seeder_id/").concat(t),method:"delete"})}function p(e,t,n){return Object(a["a"])({url:"seeder/admin/user_id/".concat(e,"/seeder_id/").concat(t),method:"put",data:n})}function m(e,t,n){return Object(a["a"])({url:"seeder/admin/user_id/".concat(e,"/seeder_id/").concat(t),method:"post",data:n})}}}]);