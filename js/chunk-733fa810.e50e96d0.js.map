{"version":3,"sources":["webpack:///./src/views/userData/components/user/DomainTable.vue?fc5a","webpack:///./src/views/userData/bindDomain.vue","webpack:///./src/views/userData/components/user/DomainTable.vue","webpack:///src/views/userData/components/user/DomainTable.vue","webpack:///./src/views/userData/components/user/DomainTable.vue?9850","webpack:///./src/views/userData/components/user/DomainTable.vue?7470","webpack:///src/views/userData/bindDomain.vue","webpack:///./src/views/userData/bindDomain.vue?4261","webpack:///./src/views/userData/bindDomain.vue?5ce4"],"names":["render","_vm","this","_c","_self","staticRenderFns","staticClass","attrs","$t","on","$event","dialogVisible","_v","_s","shadowChanged","model","value","shadowEnabled","callback","$$v","expression","profile","token","directives","name","rawName","loading","staticStyle","tableData","scopedSlots","_u","key","fn","scope","style","row","blocked","isValid","disable_p2p","formatterStatus","handleCheck","_e","ref","id","device","pClose","handleDeleteDomain","shadow","pShow","slot","tableParam","pageSize","page","handleSizeChange","handleCurrentChange","checkDialogVisible","checkSelect","checkDomainData","domain","text","saveFile","checkDomainLoading","handleCheckDomain","domainFormData","domainRules","minRows","maxRows","$set","playUrl","addDomainSubmit","components","CopyToken","data","domains","showCopyToken","required","trigger","validator","computed","mapGetters","watch","handler","immediate","deep","methods","shadowDomain","enabled","title","type","catch","message","fetchTableData","fetchUserDomain","web","fetchAllDomainAndApp","console","checkDomain","domainData","deleteDomain","play_url","bindDomain","downloadFile","mounted","component","Table"],"mappings":"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","file":"js/chunk-733fa810.e50e96d0.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DomainTable.vue?vue&type=style&index=0&id=729e3168&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Table')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app-container\"},[_c('el-alert',{attrs:{\"title\":_vm.$t('domainTable.title'),\"description\":_vm.$t('domainTable.desc'),\"type\":\"info\",\"show-icon\":\"\"}}),_c('div',{staticClass:\"tool-container\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(_vm._s(_vm.$t('domainTable.bindDomain')))]),_c('el-tooltip',{attrs:{\"content\":_vm.$t('domainTable.tokenOnly'),\"placement\":\"top\"}},[_c('el-switch',{attrs:{\"active-text\":\"Token Only\",\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},on:{\"change\":_vm.shadowChanged},model:{value:(_vm.shadowEnabled),callback:function ($$v) {_vm.shadowEnabled=$$v},expression:\"shadowEnabled\"}})],1)],1),_c('el-row',[_c('CopyToken',{attrs:{\"token\":_vm.profile.token}})],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\",\"margin-top\":\"10px\"},attrs:{\"border\":\"\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"domain\",\"label\":_vm.$t('domainTable.domain')}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":_vm.$t('domainTable.status')},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{style:(scope.row.blocked || !scope.row.isValid || scope.row.disable_p2p?'color: red':'color: green')},[_vm._v(\"\\n          \"+_vm._s(_vm.formatterStatus(scope.row))+\"\\n        \")])]}}])}),_c('el-table-column',{attrs:{\"label\":_vm.$t('domainTable.operation'),\"align\":\"center\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [[(scope.row.isValid !== 1)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleCheck(scope.row)}}},[_vm._v(_vm._s(_vm.$t('domainTable.certification')))]):_vm._e(),_c('el-popover',{ref:'popover-' + scope.row.id,style:(_vm.device==='mobile'?'':'margin-left: 10px'),attrs:{\"trigger\":\"manual\",\"placement\":\"top\",\"width\":\"200\"}},[_c('p',[_vm._v(_vm._s(_vm.$t('common.sureDelete')))]),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin\":\"0\"}},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.pClose(scope.row.id)}}},[_vm._v(_vm._s(_vm.$t('common.cancel')))]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleDeleteDomain(scope.row)}}},[_vm._v(_vm._s(_vm.$t('common.ok')))])],1),_c('el-button',{attrs:{\"slot\":\"reference\",\"disabled\":scope.row.shadow,\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.pShow(scope.row.id)}},slot:\"reference\"},[_vm._v(_vm._s(_vm.$t('common.delete')))])],1)]]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"layout\":\"sizes, prev, pager, next\",\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.tableParam.pageSize,\"current-page\":_vm.tableParam.page},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":_vm.$t('domainTable.verifyDomain'),\"visible\":_vm.checkDialogVisible,\"width\":_vm.device === 'mobile' ? '90%' : '30%'},on:{\"update:visible\":function($event){_vm.checkDialogVisible=$event}}},[_c('el-alert',{staticStyle:{\"text-align\":\"left\"},attrs:{\"title\":\"\",\"type\":\"warning\",\"description\":_vm.$t('domainTable.certificationTip'),\"closable\":false}}),_c('el-form',[_c('el-form-item',{attrs:{\"label\":_vm.$t('domainTable.userVerifyDomain.verifyWay')}},[_c('el-radio',{attrs:{\"label\":\"dns\"},model:{value:(_vm.checkSelect),callback:function ($$v) {_vm.checkSelect=$$v},expression:\"checkSelect\"}},[_vm._v(_vm._s(_vm.$t('domainTable.userVerifyDomain.DNSVerify')))]),_c('el-radio',{attrs:{\"label\":\"file\"},model:{value:(_vm.checkSelect),callback:function ($$v) {_vm.checkSelect=$$v},expression:\"checkSelect\"}},[_vm._v(_vm._s(_vm.$t('domainTable.userVerifyDomain.fileVerify')))])],1)],1),(_vm.checkSelect === 'dns')?[_c('div',[_c('ol',[_c('li',[_c('div',{staticClass:\"pv-content\"},[_c('h4',[_vm._v(_vm._s(_vm.$t('domainTable.userVerifyDomain.verifyTipHead'))+_vm._s(_vm.checkDomainData.domain)+_vm._s(_vm.$t('domainTable.userVerifyDomain.verifyTipEnd')))]),_c('h4',[_vm._v(_vm._s(_vm.checkDomainData.text))])])]),_c('li',[_c('div',{staticClass:\"pv-content pv-content-last\"},[_c('h4',[_vm._v(_vm._s(_vm.$t('domainTable.doneTip')))])])])])])]:[_c('div',[_c('ol',[_c('li',[_c('div',{staticClass:\"pv-content\"},[_c('h4',[_vm._v(_vm._s(_vm.$t('domainTable.userVerifyDomain.downloadFileHead'))),_c('a',{on:{\"click\":_vm.saveFile}},[_vm._v(_vm._s(_vm.$t('domainTable.userVerifyDomain.downloadFileEnd')))])])])]),_c('li',[_c('div',{staticClass:\"pv-content\"},[_c('h4',[_vm._v(_vm._s(_vm.$t('domainTable.userVerifyDomain.uploadFile'))+\"http://\"+_vm._s(_vm.checkDomainData.domain)+\"/ or https://\"+_vm._s(_vm.checkDomainData.domain)+\"/\")]),_c('h4',[_vm._v(_vm._s(_vm.$t('domainTable.userVerifyDomain.fileName')))])])]),_c('li',[_c('div',{staticClass:\"pv-content\"},[_c('h4',[_vm._v(_vm._s(_vm.$t('domainTable.userVerifyDomain.navVisitHead'))+\"http(s)://\"+_vm._s(_vm.checkDomainData.domain)+\"/auth.txt\"+_vm._s(_vm.$t('domainTable.userVerifyDomain.navVisitEnd')))])])]),_c('li',[_c('div',{staticClass:\"pv-content pv-content-last\"},[_c('h4',[_vm._v(_vm._s(_vm.$t('domainTable.doneTip')))])])])])])],_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.checkDialogVisible = false}}},[_vm._v(_vm._s(_vm.$t('domainTable.verifyLater')))]),_c('el-button',{attrs:{\"loading\":_vm.checkDomainLoading,\"type\":\"primary\"},on:{\"click\":_vm.handleCheckDomain}},[_vm._v(_vm._s(_vm.$t('domainTable.verifyNow')))])],1)],2),_c('el-dialog',{attrs:{\"title\":_vm.$t('domainTable.bindDomain'),\"visible\":_vm.dialogVisible,\"width\":_vm.device === 'mobile' ? '90%' : '50%'},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"domainForm\",attrs:{\"model\":_vm.domainFormData,\"rules\":_vm.domainRules}},[_c('el-form-item',{attrs:{\"prop\":\"domain\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 3, maxRows: 10},\"placeholder\":_vm.$t('domainTable.bindDomainTip')},model:{value:(_vm.domainFormData.domain),callback:function ($$v) {_vm.$set(_vm.domainFormData, \"domain\", $$v)},expression:\"domainFormData.domain\"}}),_c('br')],1),_c('el-form-item',{attrs:{\"prop\":\"playUrl\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"2\",\"placeholder\":_vm.$t('domainTable.playUrlTip')},model:{value:(_vm.domainFormData.playUrl),callback:function ($$v) {_vm.$set(_vm.domainFormData, \"playUrl\", $$v)},expression:\"domainFormData.playUrl\"}})],1)],1),_c('div',{staticClass:\"bind-warning\",style:(_vm.device==='mobile'?'padding: 0px 8px 5px;':'padding: 0px 20px 20px;')},[_vm._v(_vm._s(_vm.$t('domainTable.bindWarning')))]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(_vm._s(_vm.$t('common.cancel')))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addDomainSubmit}},[_vm._v(_vm._s(_vm.$t('common.ok')))])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"app-container\">\n  <el-alert\n    :title=\"$t('domainTable.title')\"\n    :description=\"$t('domainTable.desc')\"\n    type=\"info\"\n    show-icon>\n  </el-alert>\n  <div class=\"tool-container\">\n    <el-button type=\"primary\" @click=\"dialogVisible = true\">{{ $t('domainTable.bindDomain') }}</el-button>\n    <el-tooltip :content=\"$t('domainTable.tokenOnly')\" placement=\"top\">\n      <el-switch\n          v-model=\"shadowEnabled\"\n          active-text=\"Token Only\"\n          active-color=\"#13ce66\"\n          inactive-color=\"#ff4949\"\n          @change=\"shadowChanged\"\n      >\n      </el-switch>\n    </el-tooltip>\n  </div>\n\n  <el-row>\n    <CopyToken :token=\"profile.token\"></CopyToken>\n  </el-row>\n\n  <el-table border :data=\"tableData\" v-loading=\"loading\" style=\"width: 100%; margin-top: 10px\">\n    <el-table-column align=\"center\" prop=\"domain\" :label=\"$t('domainTable.domain')\"></el-table-column>\n    <el-table-column align=\"center\" :label=\"$t('domainTable.status')\">\n      <template slot-scope=\"scope\">\n        <span :style=\"scope.row.blocked || !scope.row.isValid || scope.row.disable_p2p?'color: red':'color: green'\">\n          {{ formatterStatus(scope.row) }}\n        </span>\n      </template>\n    </el-table-column>\n    <!--<el-table-column align=\"center\" prop=\"text\" label=\"text\"></el-table-column>-->\n    <el-table-column :label=\"$t('domainTable.operation')\" align=\"center\" fixed=\"right\">\n      <template slot-scope=\"scope\">\n        <template>\n          <el-button v-if=\"scope.row.isValid !== 1\" type=\"primary\" size=\"mini\" @click=\"handleCheck(scope.row)\">{{ $t('domainTable.certification') }}</el-button>\n          <el-popover\n            :style=\"device==='mobile'?'':'margin-left: 10px'\"\n            trigger=\"manual\"\n            placement=\"top\"\n            width=\"200\"\n            :ref=\"'popover-' + scope.row.id\">\n            <p>{{ $t('common.sureDelete') }}</p>\n            <div style=\"text-align: right; margin: 0\">\n              <el-button type=\"text\" size=\"mini\" @click=\"pClose(scope.row.id)\">{{ $t('common.cancel') }}</el-button>\n              <el-button type=\"primary\" size=\"mini\" @click=\"handleDeleteDomain(scope.row)\">{{ $t('common.ok') }}</el-button>\n            </div>\n            <el-button :disabled=\"scope.row.shadow\"\n                       slot=\"reference\"\n                       type=\"danger\"\n                       size=\"mini\"\n                       @click=\"pShow(scope.row.id)\"\n            >{{ $t('common.delete') }}</el-button>\n          </el-popover>\n        </template>\n      </template>\n    </el-table-column>\n  </el-table>\n\n  <div class=\"pagination-container\">\n    <el-pagination\n      layout=\"sizes, prev, pager, next\"\n      :page-sizes=\"[10, 20, 50, 100]\"\n      :page-size=\"tableParam.pageSize\"\n      :current-page=\"tableParam.page\"\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\">\n    </el-pagination>\n  </div>\n\n  <el-dialog\n    :title=\"$t('domainTable.verifyDomain')\"\n    :visible.sync=\"checkDialogVisible\"\n    :width=\"device === 'mobile' ? '90%' : '30%' \">\n    <el-alert\n      title=\"\"\n      style=\"text-align: left\"\n      type=\"warning\"\n      :description=\"$t('domainTable.certificationTip')\"\n      :closable=\"false\">\n    </el-alert>\n    <el-form>\n      <el-form-item :label=\"$t('domainTable.userVerifyDomain.verifyWay')\">\n        <el-radio v-model=\"checkSelect\" label=\"dns\">{{ $t('domainTable.userVerifyDomain.DNSVerify') }}</el-radio>\n        <el-radio v-model=\"checkSelect\" label=\"file\">{{ $t('domainTable.userVerifyDomain.fileVerify') }}</el-radio>\n      </el-form-item>\n    </el-form>\n\n    <template v-if=\"checkSelect === 'dns'\">\n      <div>\n        <ol>\n          <li>\n            <div class=\"pv-content\">\n              <!-- <h4>{{ $t('domainTable.userVerifyDomain.verifyTipHead') }}{{ getDomain(checkDomainData.domain) }}{{ $t('domainTable.userVerifyDomain.verifyTipEnd') }}</h4> -->\n              <h4>{{ $t('domainTable.userVerifyDomain.verifyTipHead') }}{{ checkDomainData.domain }}{{ $t('domainTable.userVerifyDomain.verifyTipEnd') }}</h4>\n              <h4>{{ checkDomainData.text }}</h4>\n            </div>\n          </li>\n          <li>\n            <div class=\"pv-content pv-content-last\">\n              <h4>{{ $t('domainTable.doneTip') }}</h4>\n            </div>\n          </li>\n        </ol>\n      </div>\n    </template>\n\n    <template v-else>\n      <div>\n        <ol>\n          <li>\n            <div class=\"pv-content\">\n              <h4>{{ $t('domainTable.userVerifyDomain.downloadFileHead') }}<a @click=\"saveFile\">{{ $t('domainTable.userVerifyDomain.downloadFileEnd') }}</a></h4>\n            </div>\n          </li>\n          <li>\n            <div class=\"pv-content\">\n              <h4>{{ $t('domainTable.userVerifyDomain.uploadFile') }}http://{{checkDomainData.domain}}/ or https://{{checkDomainData.domain}}/</h4>\n              <h4>{{ $t('domainTable.userVerifyDomain.fileName') }}</h4>\n            </div>\n          </li>\n          <li>\n            <div class=\"pv-content\">\n              <h4>{{ $t('domainTable.userVerifyDomain.navVisitHead') }}http(s)://{{checkDomainData.domain}}/auth.txt{{ $t('domainTable.userVerifyDomain.navVisitEnd') }}</h4>\n            </div>\n          </li>\n          <li>\n            <div class=\"pv-content pv-content-last\">\n              <h4>{{ $t('domainTable.doneTip') }}</h4>\n            </div>\n          </li>\n        </ol>\n      </div>\n    </template>\n\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"checkDialogVisible = false\">{{ $t('domainTable.verifyLater') }}</el-button>\n      <el-button :loading=\"checkDomainLoading\" type=\"primary\" @click=\"handleCheckDomain\">{{ $t('domainTable.verifyNow') }}</el-button>\n    </span>\n  </el-dialog>\n  <el-dialog\n    :title=\"$t('domainTable.bindDomain')\"\n    :visible.sync=\"dialogVisible\"\n    :width=\"device === 'mobile' ? '90%' : '50%' \">\n    <el-form ref=\"domainForm\" :model=\"domainFormData\" :rules=\"domainRules\">\n      <el-form-item prop=\"domain\">\n        <el-input\n          type=\"textarea\"\n          :autosize=\"{ minRows: 3, maxRows: 10}\"\n          v-model=\"domainFormData.domain\"\n          :placeholder=\"$t('domainTable.bindDomainTip')\"/>\n        <br>\n      </el-form-item>\n      <el-form-item prop=\"playUrl\">\n        <el-input\n          type=\"textarea\"\n          rows=\"2\"\n          v-model=\"domainFormData.playUrl\"\n          :placeholder=\"$t('domainTable.playUrlTip')\"/>\n      </el-form-item>\n    </el-form>\n    <div class=\"bind-warning\" :style=\"device==='mobile'?'padding: 0px 8px 5px;':'padding: 0px 20px 20px;'\">{{ $t('domainTable.bindWarning') }}</div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogVisible = false\">{{ $t('common.cancel') }}</el-button>\n      <el-button type=\"primary\" @click=\"addDomainSubmit\">{{ $t('common.ok') }}</el-button>\n    </span>\n  </el-dialog>\n\n</div>\n</template>\n\n  <script>\n  import { fetchUserDomain, bindDomain, checkDomain, deleteDomain, shadowDomain } from '@/api/userDomain'\n  import { validateURL } from '@/utils/validate'\n  import { downloadFile } from '@/utils'\n  import { mapGetters } from 'vuex'\n  import { fetchAllDomainAndApp } from '@/utils'\n  import { trim } from '@/utils'\n  import CopyToken from \"@/components/CopyToken\";\n\n  export default {\n    name: 'UserDomain',\n    components: {\n      CopyToken,\n    },\n    data() {\n      const formValidateURL = (rule, value, callback) => {\n        const domains = value.split('\\n').map(dm => trim(dm)).filter(dm => {\n          return dm !== \"\"\n        })\n        if (domains.length > 50) {\n          callback(new Error(\"too many domains\"))\n        }\n        domains.forEach(dm => {\n          if(!validateURL(dm)) {\n            const error = this.$t('domainTable.bindDomainTError')\n            callback(new Error(error))\n          } else {\n            callback()\n          }\n        })\n      }\n      return {\n        loading: false,\n        showCopyToken: false,\n        tableData: [],\n        tableParam: {\n          page: 1,\n          pageSize: 10\n        },\n        dialogVisible: false,\n        shadowEnabled: false,\n        checkDialogVisible: false,\n        checkSelect: 'dns',\n        checkDomainLoading: false,\n        checkDomainData: {\n          domain: '',\n          text: '',\n          id: 0,\n        },\n\n        domainFormData: {\n          domain: '',\n          playUrl: '',\n        },\n        domainRules: {\n          domain: [{ required: true, trigger: 'blur', validator: formValidateURL }],\n          playUrl: [{ required: true, trigger: 'blur'}],\n        }\n      }\n    },\n    computed: {\n      ...mapGetters([\n        'device',\n        'profile'\n      ]),\n    },\n    watch: {\n      profile: {\n        handler: function (val) {\n          if (val.token && this.shadowEnabled) {\n            this.showCopyToken = true\n          }\n        },\n        immediate: true,\n        deep: true,\n      }\n    },\n    methods: {\n      shadowChanged() {\n        shadowDomain({enabled: this.shadowEnabled}).then(() => {\n          this.fetchTableData()\n          this.$notify({\n            title: this.$t('common.success'),\n            type: 'success'\n          });\n        }).catch(e => {\n            this.$notify.error({\n              title: this.$t('common.error'),\n              message: e,\n            });\n            this.shadowEnabled = !this.shadowEnabled\n        })\n      },\n      pClose(id) {\n        this.$refs[`popover-` + id].doClose()\n      },\n      pShow(id) {\n        this.$refs[`popover-` + id].doShow()\n      },\n      fetchTableData(page=this.tableParam.page, pageSize=this.tableParam.pageSize) {\n        this.loading = true\n        fetchUserDomain(page, pageSize, {web: true}).then(res => {\n          if(res.data) {\n            this.tableData = [...res.data]\n          }\n          this.loading = false\n          fetchAllDomainAndApp().then(domains => {\n            let shadowEnabled = false;\n            for (let item of domains) {\n              if (item.shadow) {\n                shadowEnabled = true\n              }\n            }\n            this.shadowEnabled = shadowEnabled\n            if (!this.profile.token) {\n              this.$store.dispatch('getProfile')\n            } else {\n              this.showCopyToken = this.shadowEnabled\n            }\n          })\n\n        }).catch(err => {\n          this.loading = false\n          console.log(err)\n        })\n      },\n      handleSizeChange(pageSize) {\n        this.tableParam.pageSize = pageSize\n        this.fetchTableData()\n      },\n      handleCurrentChange(page) {\n        this.tableParam.page = page\n        this.fetchTableData()\n      },\n      handleCheck(data) {\n        this.checkDomainData = {...data}\n        this.checkDialogVisible = true\n      },\n      handleCheckDomain() {\n        this.checkDomainLoading = true\n        checkDomain(this.checkDomainData.id).then(res => {\n          this.fetchTableData()\n          this.$notify({\n              title: this.$t('common.success'),\n              message: this.$t('domainTable.verifySuccess'),\n              type: 'success'\n          });\n          this.checkDomainLoading = false\n          this.checkDialogVisible = false\n        }).catch(err => {\n          this.checkDomainLoading = false\n          console.log(err)\n        })\n      },\n      handleDeleteDomain(domainData) {\n        deleteDomain(domainData.id).then(res => {\n          this.$notify({\n              title: this.$t('common.success'),\n              message: this.$t('common.deleteSuccess'),\n              type: 'success'\n          });\n          this.pClose(domainData.id)\n          this.fetchTableData()\n        }).catch(err => {\n          this.pClose(domainData.id)\n          console.log(err)\n        })\n      },\n      addDomainSubmit() {\n        this.domainFormData.domain = trim(this.domainFormData.domain)\n        this.domainFormData.playUrl = trim(this.domainFormData.playUrl)\n        this.$refs.domainForm.validate(valid => {\n          if(valid) {\n            const domains = this.domainFormData.domain.split('\\n').map(dm => trim(dm).toLowerCase()).filter(dm => {\n              return dm !== \"\"\n            })\n            const data = {\n              play_url: this.domainFormData.playUrl,\n            }\n            if (domains.length === 1) {\n              data.domain = domains[0];\n            } else {\n              data.domains = domains;\n            }\n            bindDomain(data).then(res => {\n              this.dialogVisible = false\n              this.fetchTableData()\n            }).catch(error => {\n              console.log(error)\n            })\n          } else {\n            return false\n          }\n        })\n      },\n      formatterStatus(row) {\n        if(row.blocked) {\n          return this.$t('domainTable.illegal')\n        }\n        // if(row.reviewing) {\n        //   return this.$t('common.reviewing')\n        // }\n        if (row.disable_p2p) {\n          return this.$t('common.userClosed')\n        }\n        return row.isValid === 0 ? this.$t('domainTable.unavailable') : this.$t('common.available')\n      },\n      saveFile() {\n        downloadFile(this.checkDomainData.text, 'auth.txt')\n      },\n    },\n    mounted() {\n      this.fetchTableData()\n    }\n  }\n  </script>\n\n<style scoped>\n  ol {\n    display: table;\n    width: 100%;\n    margin: 0\n  }\n  a {\n    color: #006eff;\n    margin-left: 5px;\n  }\n  li {\n    position: relative;\n    min-height: 50px;\n    display: table-row;\n    table-layout: fixed;\n    text-align: left;\n  }\n  h4 {\n    font-weight: 400;\n  }\n  .pv-content {\n    display: table-cell;\n    padding: 0 0 22px 24px;\n    position: relative;\n    min-height: 28px;\n    vertical-align: top;\n  }\n  .pv-content-last:before {\n    display: none !important;\n  }\n  .pv-content:before {\n    content: \"\";\n    display: block;\n    position: absolute;\n    top: 10px;\n    bottom: -4px;\n    left: -2px;\n    border-left: 1px solid #ddd;\n  }\n  .pv-content:after {\n    top: 3px;\n    left: -5px;\n    width: 7px;\n    height: 7px;\n    border-color: #006eff;\n    background-color: #006eff;\n\n    content: \"\";\n    display: inline-block;\n    position: absolute;\n    border-radius: 100%;\n    border: 2px solid transparent;\n  }\n  .bind-warning {\n    text-align: left;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n\n    width: 50%;\n  }\n  .tool-container {\n    display: flex;\n    align-items: center;\n    margin: 10px 0;\n    justify-content: space-between;\n  }\n</style>\n\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DomainTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DomainTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DomainTable.vue?vue&type=template&id=729e3168&scoped=true&\"\nimport script from \"./DomainTable.vue?vue&type=script&lang=js&\"\nexport * from \"./DomainTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DomainTable.vue?vue&type=style&index=0&id=729e3168&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"729e3168\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <Table />\n</template>\n\n<script>\nimport Table from './components/user/DomainTable'\n\nexport default {\n  name: 'Domain',\n  components: {\n    Table\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bindDomain.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bindDomain.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bindDomain.vue?vue&type=template&id=4bd2e7fe&\"\nimport script from \"./bindDomain.vue?vue&type=script&lang=js&\"\nexport * from \"./bindDomain.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}