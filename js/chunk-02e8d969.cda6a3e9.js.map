{"version":3,"sources":["webpack:///./src/views/package/monthlyPackage.vue?666d","webpack:///./src/views/package/monthlyPackage.vue","webpack:///src/views/package/monthlyPackage.vue","webpack:///./src/views/package/monthlyPackage.vue?cee8","webpack:///./src/views/package/monthlyPackage.vue?5620","webpack:///./node_modules/core-js/modules/es6.string.starts-with.js"],"names":["render","_vm","this","_c","_self","staticClass","style","device","padding","staticStyle","attrs","$t","dialogVisible","on","$event","subject","upgrade","_e","_v","_s","amount","totalPriceDisplay","balance","totalPrice","model","value","useBalance","callback","$$v","expression","slot","handleBuy","_l","packages","item","key","currency","original_price","price","display","toFixed","leftDays","$set","showDialog","staticRenderFns","name","data","selectPackage","cn","en","mounted","computed","mapGetters","methods","getPackageData","fetchMonthlyPackage","then","attachLeftDays","catch","console","dialogClose","handleCreateOrder","realPrice","createOrder","path","query","is_payed","orderID","buyData","goods","goods_type","customized","balance_used","component","$export","toLength","context","STARTS_WITH","$startsWith","P","F","startsWith","searchString","that","index","Math","min","arguments","length","undefined","search","String","call","slice"],"mappings":"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","file":"js/chunk-02e8d969.cda6a3e9.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./monthlyPackage.vue?vue&type=style&index=0&id=7bbd1bc6&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"package\",style:(_vm.device === 'mobile' ? {} : {padding: '30px 120px'})},[_c('el-alert',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"type\":\"info\",\"show-icon\":\"\",\"title\":_vm.$t('package.packageSubTitle'),\"description\":_vm.$t('package.monthlyPackageSub')}}),_c('el-dialog',{attrs:{\"title\":_vm.$t('package.comfirmCreate'),\"visible\":_vm.dialogVisible,\"width\":_vm.device === 'mobile' ? '80%' : '30%',\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[(!_vm.subject.upgrade)?[_c('p',[_vm._v(_vm._s(_vm.$t('order.packageName'))+\": \"+_vm._s(_vm.subject.subject))]),_c('p',[_vm._v(_vm._s(_vm.$t('package.totalMonths'))+\": \"+_vm._s(_vm.subject.amount))]),_c('p',[_vm._v(_vm._s(_vm.$t('package.totalPrice'))+\": \"+_vm._s(_vm.totalPriceDisplay))])]:_vm._e(),(_vm.balance > 0)?_c('el-checkbox',{attrs:{\"disabled\":_vm.totalPrice === 0},model:{value:(_vm.useBalance),callback:function ($$v) {_vm.useBalance=$$v},expression:\"useBalance\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('package.useBalance'))+\" (\"+_vm._s(_vm.balance)+\")\\n    \")]):_vm._e(),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(_vm._s(_vm.$t('common.cancel')))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleBuy}},[_vm._v(_vm._s(this.$t('common.ok')))])],1)],2),_vm._l((_vm.packages),function(item){return [_c('el-row',{key:item.subject,style:({'margin-bottom':'20px'})},[_c('el-col',{attrs:{\"span\":24}},[_c('el-card',{attrs:{\"shadow\":\"never\",\"body-style\":_vm.device==='mobile'?'padding: 20px 10px':''}},[(_vm.currency === 'CNY')?[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"item-desc\"},[_c('em',{staticClass:\"shop-card-em\",style:(_vm.device==='mobile'?{'fontSize': '16px'}:{'fontSize': '20px'})},[_vm._v(_vm._s(item.subject))]),_c('span',{staticClass:\"shop-card-tips\",style:(item.original_price - item.price > 0 ? {display: 'inline-block'} : {display: 'none'})},[_vm._v(\"\\n                  立减 ￥ \"+_vm._s((item.original_price - item.price).toFixed(2))+\"\\n                \")]),_c('span',{staticClass:\"shop-card-txt\"},[_vm._v(_vm._s(item.leftDays)+\"天有效\")])]),_c('div',{staticClass:\"item-price\"},[_c('span',{staticClass:\"price\"},[(item.upgrade)?_c('span',[_c('strong',[_vm._v(\"+\")])]):_vm._e(),_c('span',[_vm._v(\"￥\")]),_c('em',[_vm._v(_vm._s(item.price))]),(item.price !== item.original_price)?_c('s',[_vm._v(\"￥\"+_vm._s(item.original_price))]):_vm._e()])]),_c('div',{staticClass:\"count\"},[(!item.upgrade)?_c('el-input-number',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"placeholder\":\"月数\",\"controls-position\":\"right\",\"size\":\"small\",\"min\":0,\"max\":12},model:{value:(item.amount),callback:function ($$v) {_vm.$set(item, \"amount\", $$v)},expression:\"item.amount\"}}):_vm._e(),_c('el-button',{attrs:{\"disabled\":item.amount===0,\"type\":\"warning\"},on:{\"click\":function($event){return _vm.showDialog(item)}}},[_vm._v(_vm._s(item.upgrade ? '升級' : '購買'))])],1)])]:[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"item-desc\"},[_c('em',{staticClass:\"shop-card-em\",style:(_vm.device==='mobile'?{'fontSize': '16px'}:{'fontSize': '20px'})},[_vm._v(_vm._s(item.subject))]),_c('span',{staticClass:\"shop-card-tips\",style:(item.original_price - item.price >0 ? {display: 'inline-block'} : {display: 'none'})},[_vm._v(\"\\n                  \"+_vm._s(((item.original_price - item.price)/item.original_price * 100).toFixed(1))+\"% off\\n                \")]),_c('span',{staticClass:\"shop-card-txt\"},[_vm._v(_vm._s(item.leftDays)+\" days period\")])]),_c('div',{staticClass:\"item-price\"},[_c('span',{staticClass:\"price\"},[(item.upgrade)?_c('span',[_c('strong',[_vm._v(\"+\")])]):_vm._e(),_c('span',[_vm._v(\"$\")]),_c('em',[_vm._v(_vm._s(item.price))]),(item.price !== item.original_price)?_c('s',[_vm._v(\"$\"+_vm._s(item.original_price))]):_vm._e()])]),_c('div',{staticClass:\"count\"},[(!item.upgrade)?_c('el-input-number',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"placeholder\":\"months\",\"controls-position\":\"right\",\"size\":\"small\",\"min\":0,\"max\":12},model:{value:(item.amount),callback:function ($$v) {_vm.$set(item, \"amount\", $$v)},expression:\"item.amount\"}}):_vm._e(),_c('el-button',{attrs:{\"disabled\":item.amount===0,\"type\":\"warning\"},on:{\"click\":function($event){return _vm.showDialog(item)}}},[_vm._v(_vm._s(item.upgrade ? 'Upgrade' :  'Buy'))])],1)])]],2)],1)],1)]})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"package\" :style=\"device === 'mobile' ? {} : {padding: '30px 120px'}\">\n    <!-- 套餐顶部说明 -->\n    <el-alert style=\"margin-bottom: 20px\" type=\"info\" show-icon :title=\"$t('package.packageSubTitle')\" :description=\"$t('package.monthlyPackageSub')\" />\n\n    <el-dialog\n        :title=\"$t('package.comfirmCreate')\"\n        :visible.sync=\"dialogVisible\"\n        :width=\"device === 'mobile' ? '80%' : '30%'\"\n        center>\n      <template v-if=\"!subject.upgrade\">\n        <p>{{$t('order.packageName')}}: {{ subject.subject }}</p>\n        <p>{{$t('package.totalMonths')}}: {{ subject.amount }}</p>\n        <p>{{$t('package.totalPrice')}}: {{ totalPriceDisplay }}</p>\n      </template>\n      <el-checkbox v-if=\"balance > 0\" :disabled=\"totalPrice === 0\" v-model=\"useBalance\">\n        {{ $t('package.useBalance') }} ({{ balance }})\n      </el-checkbox>\n      <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogVisible = false\">{{ $t('common.cancel') }}</el-button>\n      <el-button type=\"primary\" @click=\"handleBuy\">{{ this.$t('common.ok') }}</el-button>\n    </span>\n    </el-dialog>\n\n    <template v-for=\"item in packages\">\n      <el-row :key=\"item.subject\" :style=\"{'margin-bottom':'20px'}\">\n        <el-col :span=\"24\">\n          <el-card shadow=\"never\" :body-style=\"device==='mobile'?'padding: 20px 10px':''\">\n            <template v-if=\"currency === 'CNY'\">\n              <div class=\"container\">\n                <div class=\"item-desc\">\n                  <em class=\"shop-card-em\" :style=\"device==='mobile'?{'fontSize': '16px'}:{'fontSize': '20px'}\">{{ item.subject }}</em>\n                  <span class=\"shop-card-tips\" :style=\"item.original_price - item.price > 0 ? {display: 'inline-block'} : {display: 'none'}\">\n                    立减 ￥ {{ (item.original_price - item.price).toFixed(2) }}\n                  </span>\n                  <span class=\"shop-card-txt\">{{ item.leftDays }}天有效</span>\n                </div>\n                <div class=\"item-price\">\n                  <span class=\"price\">\n                    <span v-if=\"item.upgrade\"><strong>+</strong></span>\n                    <span>￥</span>\n                    <em>{{ item.price }}</em>\n                    <s v-if=\"item.price !== item.original_price\">￥{{ item.original_price }}</s>\n                  </span>\n                </div>\n                <div class=\"count\">\n                  <el-input-number v-if=\"!item.upgrade\" v-model=\"item.amount\" style=\"margin-right: 10px\" placeholder=\"月数\" controls-position=\"right\" size=\"small\" :min=\"0\" :max=\"12\"></el-input-number>\n                  <el-button :disabled=\"item.amount===0\" type=\"warning\" @click=\"showDialog(item)\">{{item.upgrade ? '升級' : '購買'}}</el-button>\n                </div>\n              </div>\n            </template>\n\n            <template v-else>\n              <div class=\"container\">\n                <div class=\"item-desc\">\n                  <em class=\"shop-card-em\" :style=\"device==='mobile'?{'fontSize': '16px'}:{'fontSize': '20px'}\">{{ item.subject }}</em>\n                  <span class=\"shop-card-tips\" :style=\"item.original_price - item.price >0 ? {display: 'inline-block'} : {display: 'none'}\">\n                    {{((item.original_price - item.price)/item.original_price * 100).toFixed(1)}}% off\n                  </span>\n                  <span class=\"shop-card-txt\">{{ item.leftDays }} days period</span>\n                </div>\n                <div class=\"item-price\">\n                  <span class=\"price\">\n                    <span v-if=\"item.upgrade\"><strong>+</strong></span>\n                    <span>$</span>\n                    <em>{{ item.price }}</em>\n                    <s v-if=\"item.price !== item.original_price\">${{ item.original_price }}</s>\n                  </span>\n                </div>\n                <div class=\"count\">\n                  <el-input-number v-if=\"!item.upgrade\" v-model=\"item.amount\" style=\"margin-right: 10px\" placeholder=\"months\" controls-position=\"right\" size=\"small\" :min=\"0\" :max=\"12\"></el-input-number>\n                  <el-button :disabled=\"item.amount===0\" type=\"warning\" @click=\"showDialog(item)\">{{item.upgrade ? 'Upgrade' :  'Buy'}}</el-button>\n                </div>\n              </div>\n            </template>\n          </el-card>\n        </el-col>\n      </el-row>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { fetchMonthlyPackage, createOrder } from '@/api/user/package'\nimport { mapGetters } from 'vuex'\nimport { getID } from '@/utils/auth'\n\nexport default {\n  name: 'Package',\n  data() {\n    return {\n      dialogVisible: false,\n      currency: '',\n      packages: [],\n      selectPackage: {\n        cn: [],\n        en: []\n      },\n      subject: {},\n      useBalance: false,\n      balance: 0,\n      totalPrice: 0,\n    }\n  },\n  mounted() {\n    this.getPackageData()\n  },\n  computed: {\n    ...mapGetters([\n      'device',\n      'language',\n    ]),\n    totalPriceDisplay() {\n      if (!this.useBalance) return this.totalPrice\n      if (this.balance >= this.totalPrice) {\n        return  0\n      }\n      return Number((this.totalPrice - this.balance).toFixed(1))\n    }\n  },\n  methods: {\n    getPackageData() {\n      fetchMonthlyPackage(getID())\n        .then(res => {\n          const { data } = res\n          const attachLeftDays = (item) => {\n            if (item.upgrade) {\n              item.leftDays = data.left_days\n              item.amount = 1\n            } else if (item.type.toLowerCase().startsWith('annual')) {\n              item.leftDays = 365\n            } else {\n              item.leftDays = 30\n            }\n          }\n\n          if(this.language==='zh') {\n            this.currency = 'CNY'\n            this.balance = data.balance_cny\n            this.packages = [...data.list_cn]\n            this.packages.forEach(item => {\n              attachLeftDays(item)\n              this.selectPackage.cn.push({...item,})\n            })\n          } else {\n            this.currency = 'USD'\n            this.balance = data.balance_usd\n            this.packages = [...data.list_en]\n            this.packages.forEach(item => {\n              attachLeftDays(item)\n              this.selectPackage.en.push({...item})\n            })\n          }\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    },\n    dialogClose() {\n      this.$router.push('/')\n    },\n    handleCreateOrder(data, realPrice) {\n      createOrder(getID(), data)\n        .then(res => {\n          if (res.data.finished) {\n            this.$router.push({\n              path: '/',\n              query: {\n                is_payed: true,\n              }\n            })\n          } else {\n            this.$router.push({\n              name: 'OrderDetail',\n              query: {\n                currency: this.currency,\n                orderID: res.data.order_id,\n                totalPrice: realPrice,\n                buyData: JSON.stringify(data.goods)\n              }\n            })\n          }\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    },\n    showDialog(subject) {\n      this.dialogVisible = true\n      this.subject = subject\n      this.totalPrice = Number(subject.price) * subject.amount\n    },\n    handleBuy() {\n      let realPrice = this.totalPrice\n      if (this.useBalance) {\n        if (this.balance >= this.totalPrice) {\n          realPrice = 0\n        } else {\n          realPrice = Number((this.totalPrice - this.balance).toFixed(1))\n        }\n      }\n      const data = {\n        price: this.totalPrice,\n        currency: this.currency,\n        goods: [this.subject],\n        goods_type: this.currency === 'CNY' ? 'monthly_packet_cn' : 'monthly_packet_en',\n        customized: this.subject.customized,\n        upgrade: this.subject.upgrade,\n        balance_used: Number((this.totalPrice - realPrice).toFixed(1)),\n      }\n      this.handleCreateOrder(data, realPrice)\n    },\n\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  em {\n    font-style: normal;\n    font-weight: 400;\n  }\n  .package {\n    img {\n      vertical-align: middle;\n      width: 100px;\n      height: auto;\n    }\n  }\n  .container {\n    .item-desc {\n      display: inline-block;\n      width: 33.3%;\n      text-align: left;\n      .shop-card-em {\n        color: #333;\n        vertical-align: middle;\n        margin-right: 5px;\n      }\n      .shop-card-txt {\n        display: block;\n        color: #8d99a6;\n        font-size: 14px;\n        padding-top: 3px;\n      }\n      .shop-card-tips {\n        vertical-align: middle;\n        color: #ff7200;\n        border: 1px solid #ff7200;\n        font-size: 12px;\n        line-height: 12px;\n        padding: 2px 5px 1px;\n        border-radius: 2px;\n      }\n    }\n    .item-price {\n      display: inline-block;\n      text-align: right;\n      width: 33.3%;\n      .price {\n        span {\n          vertical-align: top;\n          font-size: 14px;\n          line-height: 14px;\n          margin-right: 3px;\n          color: #ed711f;\n        }\n        em {\n          font-size: 24px;\n          line-height: 24px;\n          color: #ed711f;\n        }\n        s {\n          font-size: 12px;\n          color: #999;\n          display: inline-block;\n        }\n      }\n    }\n    .count {\n      display: inline-block;\n      width: 33.3%;\n      text-align: right;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./monthlyPackage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./monthlyPackage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./monthlyPackage.vue?vue&type=template&id=7bbd1bc6&scoped=true&\"\nimport script from \"./monthlyPackage.vue?vue&type=script&lang=js&\"\nexport * from \"./monthlyPackage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./monthlyPackage.vue?vue&type=style&index=0&id=7bbd1bc6&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bbd1bc6\",\n  null\n  \n)\n\nexport default component.exports","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n"],"sourceRoot":""}