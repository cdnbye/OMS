(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02fd3224"],{"4d24":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-input",{staticStyle:{width:"350px","margin-right":"5px"},attrs:{placeholder:"worker pid, url or number"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("template",{slot:"prepend"},[e("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"Select"},slot:"prepend",model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[e("el-option",{attrs:{label:"Restart",value:"restart"}}),e("el-option",{attrs:{label:"Kill",value:"kill"}}),e("el-option",{attrs:{label:"Migrate",value:"copy"}}),e("el-option",{attrs:{label:"Workers",value:"ping"}}),e("el-option",{attrs:{label:"Limits",value:"limits"}})],1)],1)],2),e("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.doAction()}}},[t._v(t._s(t.$t("common.ok")))])],1),e("vue-json-pretty",{attrs:{showIcon:"",showLineNumber:"",showDoubleQuotes:!1,data:t.jsonData}})],1)},o=[],i=(n("28a5"),n("c5f6"),n("456d"),n("ac6a"),n("876d")),r=n("5f87"),c=n("6be8"),s=n("76f1"),l=n.n(s),u=(n("8a0d"),{name:"seederStats",components:{VueJsonPretty:l.a},mounted:function(){var t=this,e=this.$route.query.sid;this.sid=e;var n=Object(r["a"])();this.getStats(n,e),this.timer=setInterval((function(){t.getStats(n,e)}),2e4)},methods:{copyTo:function(){var t=this,e=[],n=this.jsonData;n.workers&&Object.keys(n.workers).forEach((function(t){var a=n.workers[t];a.channelId&&e.push({channel:a.channelId,priority:a.priority,live:!a.isVod,keepAlive:a.keepAlive})})),this.loading=!0,Object(i["b"])(Object(r["a"])(),{infos:e,target:this.value}).then((function(){t.$notify({title:t.$t("common.success"),type:"success"}),t.value="",t.action=""})).finally((function(){t.loading=!1}))},doAction:function(){var t=this;if("copy"!==this.action){if(this.action){this.loading=!0;var e={action:this.action};if("ping"===this.action||"limits"===this.action)e.workers=Number(this.value);else{var n=this.value.split(" ").filter((function(t){return!!t})).map((function(t){return Number(t)}));1===n.length?e.pid=n[0]:e.pids=n}Object(i["a"])(Object(r["a"])(),this.sid,e).then((function(){t.$notify({title:t.$t("common.success"),type:"success"}),t.value="",t.action=""})).finally((function(){t.loading=!1}))}}else this.copyTo()},getStats:function(t,e){var n=this;this.loading=!0,Object(i["a"])(t,e,{action:"stats"}).then((function(t){var e=JSON.parse(t.data),a=e.master,o=e.workers;a&&(a.memory=n.formatValue(a.memory),a.elapsed=Object(c["b"])(a.elapsed),a.averageUplink&&(a.averageUplink="".concat(Math.round(a.averageUplink),"Mbps"))),o&&Object.keys(o).forEach((function(t){var e=o[t];e.seedFrom&&(e.seedFrom=new Date(e.seedFrom),e.uploaded=n.formatValue(e.uploaded),e.downloaded=n.formatValue(e.downloaded)),e.averageUplink&&(e.averageUplink="".concat(Math.round(e.averageUplink),"Mbps")),e.diskCacheSize&&(e.diskCacheSize=n.formatValue(e.diskCacheSize)),e.memory&&(e.memory=n.formatValue(e.memory))})),n.jsonData=e})).finally((function(){n.loading=!1}))},formatValue:function(t){var e=Object(c["d"])(t);return"".concat(e.num).concat(e.unit)}},data:function(){return{loading:!1,action:"",sid:0,value:"",jsonData:{}}},beforeDestroy:function(){clearInterval(this.timer)}}),d=u,p=n("2877"),f=Object(p["a"])(d,a,o,!1,null,"47cf881e",null);e["default"]=f.exports},"876d":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l}));var a=n("b775");function o(t,e){return Object(a["a"])({url:"seeder/user_id/".concat(t),method:"post",data:e})}function i(t){return Object(a["a"])({url:"seeder/user_id/".concat(t),method:"get"})}function r(t,e){return Object(a["a"])({url:"seeder/user_id/".concat(t,"/seeder_id/").concat(e),method:"delete"})}function c(t,e,n){return Object(a["a"])({url:"seeder/user_id/".concat(t,"/seeder_id/").concat(e),method:"put",data:n})}function s(t,e,n){return Object(a["a"])({url:"seeder/user_id/".concat(t,"/seeder_id/").concat(e),method:"post",data:n})}function l(t,e){return Object(a["a"])({url:"seeder/user_id/".concat(t,"/copy"),method:"post",data:e})}}}]);