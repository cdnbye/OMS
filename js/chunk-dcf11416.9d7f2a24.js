(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcf11416"],{"5a0c":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t=1e3,e=6e4,n=36e5,i="millisecond",a="second",r="minute",o="hour",s="day",l="week",c="month",u="quarter",f="year",d="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},v={s:g,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),a=n%60;return(e<=0?"+":"-")+g(i,2,"0")+":"+g(a,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),a=e.clone().add(i,c),r=n-a<0,o=e.clone().add(i+(r?-1:1),c);return+(-(i+(n-a)/(r?a-o:o-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:f,w:l,d:s,D:d,h:o,m:r,s:a,ms:i,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},$="en",y={};y[$]=b;var _=function(t){return t instanceof O},w=function t(e,n,i){var a;if(!e)return $;if("string"==typeof e){var r=e.toLowerCase();y[r]&&(a=r),n&&(y[r]=n,a=r);var o=e.split("-");if(!a&&o.length>1)return t(o[0])}else{var s=e.name;y[s]=e,a=s}return!i&&a&&($=a),a||!i&&$},D=function(t,e){if(_(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new O(n)},S=v;S.l=w,S.i=_,S.w=function(t,e){return D(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var O=function(){function b(t){this.$L=w(t.locale,null,!0),this.parse(t)}var g=b.prototype;return g.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(m);if(i){var a=i[2]-1||0,r=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)):new Date(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return S},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(t,e){var n=D(t);return this.startOf(e)<=n&&n<=this.endOf(e)},g.isAfter=function(t,e){return D(t)<this.startOf(e)},g.isBefore=function(t,e){return this.endOf(e)<D(t)},g.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,e){var n=this,i=!!S.u(e)||e,u=S.p(t),h=function(t,e){var a=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return i?a:a.endOf(s)},m=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},p=this.$W,b=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case f:return i?h(1,0):h(31,11);case c:return i?h(1,b):h(0,b+1);case l:var $=this.$locale().weekStart||0,y=(p<$?p+7:p)-$;return h(i?g-y:g+(6-y),b);case s:case d:return m(v+"Hours",0);case o:return m(v+"Minutes",1);case r:return m(v+"Seconds",2);case a:return m(v+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,e){var n,l=S.p(t),u="set"+(this.$u?"UTC":""),h=(n={},n[s]=u+"Date",n[d]=u+"Date",n[c]=u+"Month",n[f]=u+"FullYear",n[o]=u+"Hours",n[r]=u+"Minutes",n[a]=u+"Seconds",n[i]=u+"Milliseconds",n)[l],m=l===s?this.$D+(e-this.$W):e;if(l===c||l===f){var p=this.clone().set(d,1);p.$d[h](m),p.init(),this.$d=p.set(d,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},g.set=function(t,e){return this.clone().$set(t,e)},g.get=function(t){return this[S.p(t)]()},g.add=function(i,u){var d,h=this;i=Number(i);var m=S.p(u),p=function(t){var e=D(h);return S.w(e.date(e.date()+Math.round(t*i)),h)};if(m===c)return this.set(c,this.$M+i);if(m===f)return this.set(f,this.$y+i);if(m===s)return p(1);if(m===l)return p(7);var b=(d={},d[r]=e,d[o]=n,d[a]=t,d)[m]||1,g=this.$d.getTime()+i*b;return S.w(g,this)},g.subtract=function(t,e){return this.add(-1*t,e)},g.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var i=t||"YYYY-MM-DDTHH:mm:ssZ",a=S.z(this),r=this.$H,o=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=function(t,n,a,r){return t&&(t[n]||t(e,i))||a[n].slice(0,r)},f=function(t){return S.s(r%12||12,t,"0")},d=n.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:S.s(s+1,2,"0"),MMM:u(n.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,l,2),ddd:u(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(r),HH:S.s(r,2,"0"),h:f(1),hh:f(2),a:d(r,o,!0),A:d(r,o,!1),m:String(o),mm:S.s(o,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:a};return i.replace(p,(function(t,e){return e||m[t]||a.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(i,d,h){var m,p=S.p(d),b=D(i),g=(b.utcOffset()-this.utcOffset())*e,v=this-b,$=S.m(this,b);return $=(m={},m[f]=$/12,m[c]=$,m[u]=$/3,m[l]=(v-g)/6048e5,m[s]=(v-g)/864e5,m[o]=v/n,m[r]=v/e,m[a]=v/t,m)[p]||v,h?$:S.a($)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return y[this.$L]},g.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=w(t,e,!0);return i&&(n.$L=i),n},g.clone=function(){return S.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},b}(),M=O.prototype;return D.prototype=M,[["$ms",i],["$s",a],["$m",r],["$H",o],["$W",s],["$M",c],["$y",f],["$D",d]].forEach((function(t){M[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),D.extend=function(t,e){return t.$i||(t(e,O,D),t.$i=!0),D},D.locale=w,D.isDayjs=_,D.unix=function(t){return D(1e3*t)},D.en=y[$],D.Ls=y,D.p={},D}))},b522:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("el-alert",{attrs:{title:t.$t("domainTable.title"),description:"仅为中国大陆工商认证并且使用人民币在线支付的企业开具发票，开票金额需至少1000元且为整数，消费不足1000元可后续累积足够金额再一次性开具发票。",type:"info","show-icon":""}}),e("el-row",{staticStyle:{float:"left"}},[[e("el-col",{attrs:{xs:10,sm:4,lg:2}},[e("el-button",{staticStyle:{float:"left","margin-top":"15px"},attrs:{type:"primary",loading:t.createItemLoading},on:{click:t.openDialog}},[t._v("申请开票")])],1)]],2),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{align:"center",label:"申请开票时间"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(t.formatTime(n.row.created_at)))])]}}])}),e("el-table-column",{attrs:{align:"center",prop:"title",label:"发票抬头"}}),e("el-table-column",{attrs:{align:"center",label:"发票类型"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(0===n.row.type?"普票":"专票"))])]}}])}),e("el-table-column",{attrs:{align:"center",prop:"amount",label:"发票金额"}}),e("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",[t._v(t._s(0===n.row.status?"开票中":"已开票"))])]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(n){return[1===n.row.status?e("el-tag",[t._v("联系客服领取")]):t._e(),0===n.row.status?e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.cancel(n.row.id)}}},[t._v("撤销")]):t._e()]}}])})],1),e("div",{staticClass:"pagination-container"},[e("el-pagination",{attrs:{layout:"sizes, prev, pager, next","page-sizes":[10,20,50,100],"page-size":t.tableParam.pageSize,"current-page":t.tableParam.page},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{visible:t.dialogFormVisible,width:"mobile"===t.device?"85%":""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("p",[t._v("输入开票信息")])]),e("el-form",{ref:"createForm",attrs:{model:t.form,"label-position":"left","label-width":"120px"}},[e("el-form-item",{attrs:{prop:"header",label:"发票抬头","label-width":"100px",required:""}},[e("el-input",{attrs:{placeholder:"企业工商认证名称"},model:{value:t.form.header,callback:function(e){t.$set(t.form,"header",e)},expression:"form.header"}})],1),e("el-form-item",{attrs:{prop:"identification",label:"纳税人识别号","label-width":"120px",required:""}},[e("el-input",{model:{value:t.form.identification,callback:function(e){t.$set(t.form,"identification",e)},expression:"form.identification"}})],1),e("el-form-item",{attrs:{prop:"address",label:"收件信息","label-width":"100px",required:""}},[e("el-input",{attrs:{placeholder:"收件地址 联系人",type:"textarea",autosize:"",rows:3},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),e("el-form-item",{attrs:{prop:"invoice_issued",label:"发票类型","label-width":"100px"}},[e("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"普票"},model:{value:t.form.invoice_type,callback:function(e){t.$set(t.form,"invoice_type",e)},expression:"form.invoice_type"}},[e("el-option",{attrs:{label:"普票",value:"0"}}),e("el-option",{attrs:{label:"专票",value:"1"}})],1)],1),e("el-form-item",{attrs:{prop:"invoice_issued",label:"已开金额","label-width":"100px"}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.form.invoice_issued))])]),e("el-form-item",{attrs:{prop:"available_amount",label:"可开金额","label-width":"100px"}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.form.available_amount))])]),e("el-form-item",{attrs:{label:"开票金额","label-width":"100px",required:""}},[e("el-input",{attrs:{type:"number",placeholder:"至少1000元"},model:{value:t.awaitAmount,callback:function(e){t.awaitAmount=e},expression:"awaitAmount"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),e("el-button",{attrs:{type:"primary",loading:t.createItemLoading},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("common.ok")))])],1)],1)],1)},a=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("c5f6"),n("bd86")),o=n("b775");function s(t){return Object(o["a"])({url:"user/user_id/".concat(t,"/invoice_info"),method:"get"})}function l(t,e,n){return Object(o["a"])({url:"user/user_id/".concat(t,"/invoice_list?page=").concat(e,"&page_size=").concat(n),method:"get"})}function c(t,e){return Object(o["a"])({url:"user/user_id/".concat(t,"/invoice_create"),method:"post",data:e})}function u(t,e){return Object(o["a"])({url:"user/user_id/".concat(t,"/invoice/invoice_id/").concat(e),method:"delete"})}var f=n("2f62"),d=n("5f87"),h=n("5a0c"),m=n.n(h);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={data:function(){return{createItemLoading:!1,dialogFormVisible:!1,loading:!1,awaitAmount:0,form:{header:"",identification:"",address:"",available_amount:0,invoice_issued:0,invoice_type:0},tableData:[],tableParam:{page:1,pageSize:10}}},computed:b({},Object(f["b"])(["device"])),mounted:function(){this.fetchTableData()},methods:{formatTime:function(t){return m()(t).format("YYYY-MM-DD HH:mm")},openDialog:function(){var t=this;this.createItemLoading=!0,s(Object(d["a"])()).then((function(e){t.form=e.data,t.dialogFormVisible=!0})).finally((function(){t.createItemLoading=!1}))},fetchTableData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableParam.page,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableParam.pageSize;this.loading=!0,l(Object(d["a"])(),e,n).then((function(e){e.data&&(t.tableData=e.data),t.loading=!1})).catch((function(e){t.tableData=[],t.loading=!1,console.log(e)}))},handleSubmit:function(){var t=this,e=Number(this.awaitAmount),n=Number(this.form.available_amount);e>n||e<1e3?this.$notify.error({title:this.$t("common.error"),message:"输入金额有误"}):(this.createItemLoading=!0,this.$messageBox.confirm("确认提交吗？",{distinguishCancelAndClose:!0,confirmButtonText:this.$t("common.ok"),cancelButtonText:this.$t("common.cancel")}).then((function(){c(Object(d["a"])(),{header:t.form.header,identification:t.form.identification,address:t.form.address,amount:e,invoice_type:Number(t.form.invoice_type)}).then((function(){t.$notify({title:t.$t("common.success"),message:"提交成功",type:"success"})})).finally((function(){t.createItemLoading=!1,t.dialogFormVisible=!1,t.fetchTableData()}))})).finally((function(){t.createItemLoading=!1})))},cancel:function(t){var e=this;this.loading=!0,u(Object(d["a"])(),t).then((function(){e.loading=!1,e.$notify({title:e.$t("common.success"),message:"撤销成功",type:"success"}),e.fetchTableData()})).catch((function(t){e.loading=!1,console.log(t)}))},handleSizeChange:function(t){this.tableParam.pageSize=t,this.fetchTableData()},handleCurrentChange:function(t){this.tableParam.page=t,this.fetchTableData()}}},v=g,$=n("2877"),y=Object($["a"])(v,i,a,!1,null,null,null);e["default"]=y.exports}}]);