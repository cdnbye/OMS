{"version":3,"sources":["webpack:///./src/views/geofly/index.vue?9ec8","webpack:///./src/views/geofly/index.vue","webpack:///./node_modules/reconnecting-websocket/dist/reconnecting-websocket-mjs.js","webpack:///src/views/geofly/index.vue","webpack:///./src/views/geofly/index.vue?cb29","webpack:///./src/views/geofly/index.vue?bbe2"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","attrs","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__values","o","m","Symbol","iterator","i","call","next","length","value","done","__read","n","r","e","ar","push","error","__spread","arguments","concat","Event","type","target","ErrorEvent","_super","_this","message","CloseEvent","code","reason","wasClean","getGlobalWebSocket","WebSocket","isWebSocket","w","CLOSING","DEFAULT","maxReconnectionDelay","minReconnectionDelay","Math","random","minUptime","reconnectionDelayGrowFactor","connectionTimeout","maxRetries","Infinity","maxEnqueuedMessages","startClosed","debug","ReconnectingWebSocket","url","protocols","options","_listeners","open","close","_retryCount","_shouldReconnect","_connectLock","_binaryType","_closeCalled","_messageQueue","onclose","onerror","onmessage","onopen","_handleOpen","event","_debug","_a","_options","clearTimeout","_connectTimeout","_uptimeTimeout","setTimeout","_acceptOpen","_ws","binaryType","forEach","send","listener","_callEventListener","_handleMessage","_handleError","_disconnect","undefined","_connect","_handleClose","_clearTimeouts","_url","_protocols","defineProperty","get","enumerable","configurable","CONNECTING","OPEN","CLOSED","set","max","bytes","reduce","acc","Blob","size","byteLength","bufferedAmount","extensions","protocol","readyState","reconnect","data","addEventListener","dispatchEvent","e_1","listeners","listeners_1","listeners_1_1","e_1_1","return","removeEventListener","filter","l","args","_i","console","log","apply","_getNextDelay","_b","_d","delay","pow","_wait","Promise","resolve","_getNextUrl","urlProvider","then","Error","_removeListeners","_addListeners","_handleTimeout","handleEvent","name","scene","ws","flyLineTimer","resizing","resizingTimer","computed","mapGetters","mounted","methods","initScene","loc","id","logoVisible","map","pitch","style","zoom","token","defaultLanguage","blend","shape","color","animate","enable","interval","trailLength","duration","opacity","flyLine","parser","x","y","x1","y1","flag","renderData","startTimer","timeout","msg","alert","flydata","convert","to","coords","lat1","lon1","lat2","lon2","setupListener","handleResizing","beforeDestroy","component"],"mappings":"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KAAK8F,iBAEfxB,EA9c+B,GAid3B,I,4nBC9jBf,OACA,oBACA,yBACA,6BACA,kCAEA,MACA,GACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,aAGe,GACf+F,cACAjC,KAFA,WAGA,OACAkC,WACAC,QACAC,kBACAC,YACAC,qBAGAC,cACAC,gBACA,UACA,cAGAC,QAjBA,WAiBA,WACA,yBACA,mBACA,kBAEA,oDACA,mBAIAC,SACAC,UADA,SACAC,GAAA,WACA,gGACA,gBACAC,SACAC,eACAC,mBACAC,QACAC,aACAC,OACAC,qGAGA,aACA,0BACAC,sDAEAlB,oBACA,SACA,KACA,oBAAAmB,iBACA5D,KAAA,IACA6D,MAAA,eACAC,MAAA,SACAC,QAAA,CACAC,UACAC,YACAC,eACAC,eAEAX,MAAA,CACAY,aAEA,aACA,iBAEAC,aACAC,QACAzJ,YACA0J,SACAC,SACAC,UACAC,aAGAC,OAGA,gBACA,sCACAC,IACA,eAGAC,EADA,MACAA,IACA,MACAA,IACA,MACAA,IAEAA,OAEAC,IAGAD,OAEApC,0BACAA,cAEA,OAEArG,aACAN,yBACAD,0BAEA,oBACA,OACA6G,0CAGAA,0CAAA,MAEA,EADA,SAEA,IACAqC,gBACA,SAEA,YADAC,SAGA,oBACA,qCACA,aACAC,eAEAN,WAGA,sBAEAO,QApGA,SAoGAH,GAEA,SACA,SAAI,EAAJ,KACA,aACA,cAIAI,uBACA,iBACAC,QACAC,WACAC,WACAC,WACAC,WACA1B,+BAXA,GADA,GAiBA2B,cAzHA,WAyHA,WACA,aACAhD,6BAAA,sBACAA,8BAAA,sBACAA,6BAAA,sBACAA,4BAAA,uBAEAiD,eAhIA,WAgIA,WAEA,qBACA,iBACA,0CACA,cACA,uBACA,QAGAC,cArKA,WAsKA5H,gCACAA,iCACA,YACA,qBAEA,SACA,oCC3M8V,I,wBCQ1V6H,EAAY,eACd,EACA3N,EACAM,GACA,EACA,KACA,KACA,MAIa,aAAAqN,E","file":"js/chunk-983d9350.f8232533.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=8452ab60&prod&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{attrs:{\"id\":\"map\"}})])\n}]\n\nexport { render, staticRenderFns }","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nvar Event = /** @class */ (function () {\r\n    function Event(type, target) {\r\n        this.target = target;\r\n        this.type = type;\r\n    }\r\n    return Event;\r\n}());\r\nvar ErrorEvent = /** @class */ (function (_super) {\r\n    __extends(ErrorEvent, _super);\r\n    function ErrorEvent(error, target) {\r\n        var _this = _super.call(this, 'error', target) || this;\r\n        _this.message = error.message;\r\n        _this.error = error;\r\n        return _this;\r\n    }\r\n    return ErrorEvent;\r\n}(Event));\r\nvar CloseEvent = /** @class */ (function (_super) {\r\n    __extends(CloseEvent, _super);\r\n    function CloseEvent(code, reason, target) {\r\n        if (code === void 0) { code = 1000; }\r\n        if (reason === void 0) { reason = ''; }\r\n        var _this = _super.call(this, 'close', target) || this;\r\n        _this.wasClean = true;\r\n        _this.code = code;\r\n        _this.reason = reason;\r\n        return _this;\r\n    }\r\n    return CloseEvent;\r\n}(Event));\n\n/*!\r\n * Reconnecting WebSocket\r\n * by Pedro Ladaria <pedro.ladaria@gmail.com>\r\n * https://github.com/pladaria/reconnecting-websocket\r\n * License MIT\r\n */\r\nvar getGlobalWebSocket = function () {\r\n    if (typeof WebSocket !== 'undefined') {\r\n        // @ts-ignore\r\n        return WebSocket;\r\n    }\r\n};\r\n/**\r\n * Returns true if given argument looks like a WebSocket class\r\n */\r\nvar isWebSocket = function (w) { return typeof w !== 'undefined' && !!w && w.CLOSING === 2; };\r\nvar DEFAULT = {\r\n    maxReconnectionDelay: 10000,\r\n    minReconnectionDelay: 1000 + Math.random() * 4000,\r\n    minUptime: 5000,\r\n    reconnectionDelayGrowFactor: 1.3,\r\n    connectionTimeout: 4000,\r\n    maxRetries: Infinity,\r\n    maxEnqueuedMessages: Infinity,\r\n    startClosed: false,\r\n    debug: false,\r\n};\r\nvar ReconnectingWebSocket = /** @class */ (function () {\r\n    function ReconnectingWebSocket(url, protocols, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this._listeners = {\r\n            error: [],\r\n            message: [],\r\n            open: [],\r\n            close: [],\r\n        };\r\n        this._retryCount = -1;\r\n        this._shouldReconnect = true;\r\n        this._connectLock = false;\r\n        this._binaryType = 'blob';\r\n        this._closeCalled = false;\r\n        this._messageQueue = [];\r\n        /**\r\n         * An event listener to be called when the WebSocket connection's readyState changes to CLOSED\r\n         */\r\n        this.onclose = null;\r\n        /**\r\n         * An event listener to be called when an error occurs\r\n         */\r\n        this.onerror = null;\r\n        /**\r\n         * An event listener to be called when a message is received from the server\r\n         */\r\n        this.onmessage = null;\r\n        /**\r\n         * An event listener to be called when the WebSocket connection's readyState changes to OPEN;\r\n         * this indicates that the connection is ready to send and receive data\r\n         */\r\n        this.onopen = null;\r\n        this._handleOpen = function (event) {\r\n            _this._debug('open event');\r\n            var _a = _this._options.minUptime, minUptime = _a === void 0 ? DEFAULT.minUptime : _a;\r\n            clearTimeout(_this._connectTimeout);\r\n            _this._uptimeTimeout = setTimeout(function () { return _this._acceptOpen(); }, minUptime);\r\n            _this._ws.binaryType = _this._binaryType;\r\n            // send enqueued messages (messages sent before websocket open event)\r\n            _this._messageQueue.forEach(function (message) { return _this._ws.send(message); });\r\n            _this._messageQueue = [];\r\n            if (_this.onopen) {\r\n                _this.onopen(event);\r\n            }\r\n            _this._listeners.open.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._handleMessage = function (event) {\r\n            _this._debug('message event');\r\n            if (_this.onmessage) {\r\n                _this.onmessage(event);\r\n            }\r\n            _this._listeners.message.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._handleError = function (event) {\r\n            _this._debug('error event', event.message);\r\n            _this._disconnect(undefined, event.message === 'TIMEOUT' ? 'timeout' : undefined);\r\n            if (_this.onerror) {\r\n                _this.onerror(event);\r\n            }\r\n            _this._debug('exec error listeners');\r\n            _this._listeners.error.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n            _this._connect();\r\n        };\r\n        this._handleClose = function (event) {\r\n            _this._debug('close event');\r\n            _this._clearTimeouts();\r\n            if (_this._shouldReconnect) {\r\n                _this._connect();\r\n            }\r\n            if (_this.onclose) {\r\n                _this.onclose(event);\r\n            }\r\n            _this._listeners.close.forEach(function (listener) { return _this._callEventListener(event, listener); });\r\n        };\r\n        this._url = url;\r\n        this._protocols = protocols;\r\n        this._options = options;\r\n        if (this._options.startClosed) {\r\n            this._shouldReconnect = false;\r\n        }\r\n        this._connect();\r\n    }\r\n    Object.defineProperty(ReconnectingWebSocket, \"CONNECTING\", {\r\n        get: function () {\r\n            return 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"OPEN\", {\r\n        get: function () {\r\n            return 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"CLOSING\", {\r\n        get: function () {\r\n            return 2;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket, \"CLOSED\", {\r\n        get: function () {\r\n            return 3;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CONNECTING\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CONNECTING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"OPEN\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.OPEN;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CLOSING\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CLOSING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"CLOSED\", {\r\n        get: function () {\r\n            return ReconnectingWebSocket.CLOSED;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"binaryType\", {\r\n        get: function () {\r\n            return this._ws ? this._ws.binaryType : this._binaryType;\r\n        },\r\n        set: function (value) {\r\n            this._binaryType = value;\r\n            if (this._ws) {\r\n                this._ws.binaryType = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"retryCount\", {\r\n        /**\r\n         * Returns the number or connection retries\r\n         */\r\n        get: function () {\r\n            return Math.max(this._retryCount, 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"bufferedAmount\", {\r\n        /**\r\n         * The number of bytes of data that have been queued using calls to send() but not yet\r\n         * transmitted to the network. This value resets to zero once all queued data has been sent.\r\n         * This value does not reset to zero when the connection is closed; if you keep calling send(),\r\n         * this will continue to climb. Read only\r\n         */\r\n        get: function () {\r\n            var bytes = this._messageQueue.reduce(function (acc, message) {\r\n                if (typeof message === 'string') {\r\n                    acc += message.length; // not byte size\r\n                }\r\n                else if (message instanceof Blob) {\r\n                    acc += message.size;\r\n                }\r\n                else {\r\n                    acc += message.byteLength;\r\n                }\r\n                return acc;\r\n            }, 0);\r\n            return bytes + (this._ws ? this._ws.bufferedAmount : 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"extensions\", {\r\n        /**\r\n         * The extensions selected by the server. This is currently only the empty string or a list of\r\n         * extensions as negotiated by the connection\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.extensions : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"protocol\", {\r\n        /**\r\n         * A string indicating the name of the sub-protocol the server selected;\r\n         * this will be one of the strings specified in the protocols parameter when creating the\r\n         * WebSocket object\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.protocol : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"readyState\", {\r\n        /**\r\n         * The current state of the connection; this is one of the Ready state constants\r\n         */\r\n        get: function () {\r\n            if (this._ws) {\r\n                return this._ws.readyState;\r\n            }\r\n            return this._options.startClosed\r\n                ? ReconnectingWebSocket.CLOSED\r\n                : ReconnectingWebSocket.CONNECTING;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReconnectingWebSocket.prototype, \"url\", {\r\n        /**\r\n         * The URL as resolved by the constructor\r\n         */\r\n        get: function () {\r\n            return this._ws ? this._ws.url : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Closes the WebSocket connection or connection attempt, if any. If the connection is already\r\n     * CLOSED, this method does nothing\r\n     */\r\n    ReconnectingWebSocket.prototype.close = function (code, reason) {\r\n        if (code === void 0) { code = 1000; }\r\n        this._closeCalled = true;\r\n        this._shouldReconnect = false;\r\n        this._clearTimeouts();\r\n        if (!this._ws) {\r\n            this._debug('close enqueued: no ws instance');\r\n            return;\r\n        }\r\n        if (this._ws.readyState === this.CLOSED) {\r\n            this._debug('close: already closed');\r\n            return;\r\n        }\r\n        this._ws.close(code, reason);\r\n    };\r\n    /**\r\n     * Closes the WebSocket connection or connection attempt and connects again.\r\n     * Resets retry counter;\r\n     */\r\n    ReconnectingWebSocket.prototype.reconnect = function (code, reason) {\r\n        this._shouldReconnect = true;\r\n        this._closeCalled = false;\r\n        this._retryCount = -1;\r\n        if (!this._ws || this._ws.readyState === this.CLOSED) {\r\n            this._connect();\r\n        }\r\n        else {\r\n            this._disconnect(code, reason);\r\n            this._connect();\r\n        }\r\n    };\r\n    /**\r\n     * Enqueue specified data to be transmitted to the server over the WebSocket connection\r\n     */\r\n    ReconnectingWebSocket.prototype.send = function (data) {\r\n        if (this._ws && this._ws.readyState === this.OPEN) {\r\n            this._debug('send', data);\r\n            this._ws.send(data);\r\n        }\r\n        else {\r\n            var _a = this._options.maxEnqueuedMessages, maxEnqueuedMessages = _a === void 0 ? DEFAULT.maxEnqueuedMessages : _a;\r\n            if (this._messageQueue.length < maxEnqueuedMessages) {\r\n                this._debug('enqueue', data);\r\n                this._messageQueue.push(data);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Register an event handler of a specific event type\r\n     */\r\n    ReconnectingWebSocket.prototype.addEventListener = function (type, listener) {\r\n        if (this._listeners[type]) {\r\n            // @ts-ignore\r\n            this._listeners[type].push(listener);\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype.dispatchEvent = function (event) {\r\n        var e_1, _a;\r\n        var listeners = this._listeners[event.type];\r\n        if (listeners) {\r\n            try {\r\n                for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\r\n                    var listener = listeners_1_1.value;\r\n                    this._callEventListener(event, listener);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Removes an event listener\r\n     */\r\n    ReconnectingWebSocket.prototype.removeEventListener = function (type, listener) {\r\n        if (this._listeners[type]) {\r\n            // @ts-ignore\r\n            this._listeners[type] = this._listeners[type].filter(function (l) { return l !== listener; });\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._debug = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (this._options.debug) {\r\n            // not using spread because compiled version uses Symbols\r\n            // tslint:disable-next-line\r\n            console.log.apply(console, __spread(['RWS>'], args));\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._getNextDelay = function () {\r\n        var _a = this._options, _b = _a.reconnectionDelayGrowFactor, reconnectionDelayGrowFactor = _b === void 0 ? DEFAULT.reconnectionDelayGrowFactor : _b, _c = _a.minReconnectionDelay, minReconnectionDelay = _c === void 0 ? DEFAULT.minReconnectionDelay : _c, _d = _a.maxReconnectionDelay, maxReconnectionDelay = _d === void 0 ? DEFAULT.maxReconnectionDelay : _d;\r\n        var delay = 0;\r\n        if (this._retryCount > 0) {\r\n            delay =\r\n                minReconnectionDelay * Math.pow(reconnectionDelayGrowFactor, this._retryCount - 1);\r\n            if (delay > maxReconnectionDelay) {\r\n                delay = maxReconnectionDelay;\r\n            }\r\n        }\r\n        this._debug('next delay', delay);\r\n        return delay;\r\n    };\r\n    ReconnectingWebSocket.prototype._wait = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            setTimeout(resolve, _this._getNextDelay());\r\n        });\r\n    };\r\n    ReconnectingWebSocket.prototype._getNextUrl = function (urlProvider) {\r\n        if (typeof urlProvider === 'string') {\r\n            return Promise.resolve(urlProvider);\r\n        }\r\n        if (typeof urlProvider === 'function') {\r\n            var url = urlProvider();\r\n            if (typeof url === 'string') {\r\n                return Promise.resolve(url);\r\n            }\r\n            if (!!url.then) {\r\n                return url;\r\n            }\r\n        }\r\n        throw Error('Invalid URL');\r\n    };\r\n    ReconnectingWebSocket.prototype._connect = function () {\r\n        var _this = this;\r\n        if (this._connectLock || !this._shouldReconnect) {\r\n            return;\r\n        }\r\n        this._connectLock = true;\r\n        var _a = this._options, _b = _a.maxRetries, maxRetries = _b === void 0 ? DEFAULT.maxRetries : _b, _c = _a.connectionTimeout, connectionTimeout = _c === void 0 ? DEFAULT.connectionTimeout : _c, _d = _a.WebSocket, WebSocket = _d === void 0 ? getGlobalWebSocket() : _d;\r\n        if (this._retryCount >= maxRetries) {\r\n            this._debug('max retries reached', this._retryCount, '>=', maxRetries);\r\n            return;\r\n        }\r\n        this._retryCount++;\r\n        this._debug('connect', this._retryCount);\r\n        this._removeListeners();\r\n        if (!isWebSocket(WebSocket)) {\r\n            throw Error('No valid WebSocket class provided');\r\n        }\r\n        this._wait()\r\n            .then(function () { return _this._getNextUrl(_this._url); })\r\n            .then(function (url) {\r\n            // close could be called before creating the ws\r\n            if (_this._closeCalled) {\r\n                return;\r\n            }\r\n            _this._debug('connect', { url: url, protocols: _this._protocols });\r\n            _this._ws = _this._protocols\r\n                ? new WebSocket(url, _this._protocols)\r\n                : new WebSocket(url);\r\n            _this._ws.binaryType = _this._binaryType;\r\n            _this._connectLock = false;\r\n            _this._addListeners();\r\n            _this._connectTimeout = setTimeout(function () { return _this._handleTimeout(); }, connectionTimeout);\r\n        });\r\n    };\r\n    ReconnectingWebSocket.prototype._handleTimeout = function () {\r\n        this._debug('timeout event');\r\n        this._handleError(new ErrorEvent(Error('TIMEOUT'), this));\r\n    };\r\n    ReconnectingWebSocket.prototype._disconnect = function (code, reason) {\r\n        if (code === void 0) { code = 1000; }\r\n        this._clearTimeouts();\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._removeListeners();\r\n        try {\r\n            this._ws.close(code, reason);\r\n            this._handleClose(new CloseEvent(code, reason, this));\r\n        }\r\n        catch (error) {\r\n            // ignore\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._acceptOpen = function () {\r\n        this._debug('accept open');\r\n        this._retryCount = 0;\r\n    };\r\n    ReconnectingWebSocket.prototype._callEventListener = function (event, listener) {\r\n        if ('handleEvent' in listener) {\r\n            // @ts-ignore\r\n            listener.handleEvent(event);\r\n        }\r\n        else {\r\n            // @ts-ignore\r\n            listener(event);\r\n        }\r\n    };\r\n    ReconnectingWebSocket.prototype._removeListeners = function () {\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._debug('removeListeners');\r\n        this._ws.removeEventListener('open', this._handleOpen);\r\n        this._ws.removeEventListener('close', this._handleClose);\r\n        this._ws.removeEventListener('message', this._handleMessage);\r\n        // @ts-ignore\r\n        this._ws.removeEventListener('error', this._handleError);\r\n    };\r\n    ReconnectingWebSocket.prototype._addListeners = function () {\r\n        if (!this._ws) {\r\n            return;\r\n        }\r\n        this._debug('addListeners');\r\n        this._ws.addEventListener('open', this._handleOpen);\r\n        this._ws.addEventListener('close', this._handleClose);\r\n        this._ws.addEventListener('message', this._handleMessage);\r\n        // @ts-ignore\r\n        this._ws.addEventListener('error', this._handleError);\r\n    };\r\n    ReconnectingWebSocket.prototype._clearTimeouts = function () {\r\n        clearTimeout(this._connectTimeout);\r\n        clearTimeout(this._uptimeTimeout);\r\n    };\r\n    return ReconnectingWebSocket;\r\n}());\n\nexport default ReconnectingWebSocket;\n","<template>\n  <div>\n    <div id=\"map\"></div>\n  </div>\n</template>\n<script>\nimport ReconnectingWebSocket from 'reconnecting-websocket'\nimport { getID } from '@/utils/auth'\nimport { mapGetters } from 'vuex'\nimport { getItem } from \"@/utils/storage\";\nimport { LOCATION } from '@/constant'\n\nconst SERVER_URLS = {\n  'd1': 'ws://localhost',\n  'p1': 'wss://cn.cdnbye.com',\n  'p3': 'wss://hk.swarmcloud.net',\n  'p2': 'wss://tracker.hdtvcloud.com',\n}\nconst MAX_LINES = 7000\nconst FLY_TYPE2COLOR = {\n  0: '#B22222',     // fastpath\n  1: '#33ff33',     // SameIp\n  2: '#33ff33',     // SameAsn\n  3: '#1C86EE',     // SameCountry\n  4: '#FFD700',     // SameContinent\n  5: '#FF7F00',     // SameAbrLevel\n  6: '#B22222',     // SameChannel\n  7: '#A020F0',     // VodPosFirst\n  8: '#ffffff',     // SuperPeer\n}\n\nexport default {\n  name: 'GeoFly',\n  data() {\n    return {\n      scene: null,\n      ws: null,\n      flyLineTimer: null,\n      resizing: false,\n      resizingTimer: null,\n    };\n  },\n  computed: {\n    ...mapGetters([\n      'profile',\n      'language',\n    ]),\n  },\n  mounted() {\n    const loc = getItem(LOCATION)\n    if (this.profile.token) {\n      this.initScene(loc)\n    } else {\n      this.$store.dispatch('getProfile').then(() => {\n        this.initScene(loc)\n      })\n    }\n  },\n  methods: {\n    initScene(loc) {\n      let serverUrl = `${SERVER_URLS[loc]}/flyline?uid=${getID()}&token=${this.profile.token}`\n      const scene = new L7.Scene({\n        id: 'map',\n        logoVisible: false,\n        map: new L7.Mapbox({\n          pitch: 0,\n          style: 'dark',\n          zoom: 2,\n          token: 'pk.eyJ1IjoiY2RuYnllIiwiYSI6ImNsMHE3ZmRxNDI3ZXczbHFrYm82Z2MyODEifQ.RTPyCND8dTNtHudmaQolwQ',\n        })\n      });\n      this.scene = scene;\n      const language = new MapboxLanguage({\n        defaultLanguage: this.language === 'en' ? 'en' : 'zh-Hant',\n      });\n      scene.map.addControl(language)\n      let flag = false;\n      let flydata = [];\n      const flyLine = new L7.LineLayer({ blend: 'normal' })\n          .size(0.8)\n          .shape('greatcircle')\n          .color('color')\n          .animate({\n            enable: true,\n            interval: 0.3,\n            trailLength: 0.2,\n            duration: 3.5\n          })\n          .style({\n            opacity: 0.6\n          });\n      const renderData = () => {\n        if (flag && !this.resizing) {\n          // console.warn(`setData size ${flydata.length}`)\n          flyLine.setData(flydata, {\n            parser: {\n              type: 'json',\n              x: 'lon1',\n              y: 'lat1',\n              x1: 'lon2',\n              y1: 'lat2',\n            }\n          })\n          flag = false\n        }\n      }\n      const startTimer = (timeout) => {\n        this.flyLineTimer = setTimeout(() => {\n          renderData()\n          const size = flydata.length\n          // console.warn(`startTimer ${timeout} size ${size}`)\n          if (size < 100) {\n            startTimer(200)\n          } else if (size < 500) {\n            startTimer(1000)\n          } else if (size < 1000) {\n            startTimer(3000)\n          } else {\n            startTimer(10000)\n          }\n        }, timeout)\n      }\n\n      startTimer(200)\n\n      scene.on('loaded', () => {\n        scene.addLayer(flyLine);\n\n        const wsOptions = {\n          // debug: true,\n          maxRetries: 5,\n          minReconnectionDelay: 5000, // 生成15到40秒的随机数\n          maxReconnectionDelay: 60*1000,\n        };\n        let ws = new ReconnectingWebSocket(serverUrl, undefined, wsOptions);\n        this.ws = ws;\n        ws.addEventListener('open', () => {\n          // console.info(`ws ${SERVER_URL} connection opened`);\n        })\n        ws.addEventListener('message', (e) => {\n          let data = e.data;\n          let msg\n          try {\n            msg = JSON.parse(data);\n          } catch (e) {\n            alert(data)\n            return\n          }\n          const coords = this.convert(msg)\n          flydata.push(...coords)\n          if (flydata.length > MAX_LINES) {\n            flydata = flydata.slice(-MAX_LINES)\n          }\n          flag = true\n        })\n      });\n      this.setupListener()\n    },\n    convert(msg) {\n      // console.log(msg)\n      const coords = [];               // [ {lon, lat, color} ]\n      let { from, to } = msg\n      if (!from || !to) return coords\n      if (to.length === 0) return coords\n      // if (to.length >= 5) {\n      //   to = to.slice(0, 4)\n      // }\n      to.forEach(item => {\n        if (!item.typ) item.typ = 0\n        coords.push({\n          lat1: from.lat,\n          lon1: from.lon,\n          lat2: item.lat,\n          lon2: item.lon,\n          color: FLY_TYPE2COLOR[item.typ] || '#B22222',\n        })\n      })\n      return coords\n    },\n    setupListener() {\n      const { scene } = this\n      scene.on('movestart', () => {this.handleResizing()}); // 地图平移开始时触发\n      scene.on('zoomchange', () => {this.handleResizing()}); // 地图缩放级别更改后触发\n      scene.on('zoomstart', () => {this.handleResizing()}); // 缩放开始时触发\n      scene.on('dragging', () => {this.handleResizing()}); // 拖拽地图过程中触发\n    },\n    handleResizing() {\n      // console.warn(`handleResizing`)\n      if (this.resizingTimer) return\n      this.resizing = true\n      this.resizingTimer = setTimeout(() => {\n        this.resizing = false\n        this.resizingTimer = null\n      }, 2000)\n    }\n  },\n  beforeDestroy() {\n    clearTimeout(this.flyLineTimer)\n    clearTimeout(this.resizingTimer)\n    if (this.scene) {\n      this.scene.destroy();\n    }\n    if (this.ws) {\n      this.ws.close(1000, 'normal close');\n    }\n  }\n};\n</script>\n<style lang=\"scss\">\n#map {\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8452ab60&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=8452ab60&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}