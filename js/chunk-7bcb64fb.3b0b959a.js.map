{"version":3,"sources":["webpack:///./src/api/liveData.js","webpack:///./src/views/dashboard/admin/hotChannel.vue","webpack:///src/views/dashboard/admin/hotChannel.vue","webpack:///./src/views/dashboard/admin/hotChannel.vue?ca3d","webpack:///./src/views/dashboard/admin/hotChannel.vue?a07a"],"names":["fetchLiveTimeData","request","url","method","fetchOverallData","fetchLiveData","type","opts","country","fetchHotChannels","page","pageSize","splitHotChannels","data","render","_vm","this","_c","_self","style","device","directives","name","rawName","value","loading","expression","attrs","tableData","scopedSlots","_u","key","fn","props","_v","_s","row","users","join","channel","columns","length","_e","indexMethod","$t","scope","on","$event","splitChannel","channel_id","staticClass","tableParam","handleSizeChange","handleCurrentChange","staticRenderFns","computed","mapGetters","mounted","methods","fetchTableData","window","catch","console","index","channelId","then","title","message","beforeDestroy","component"],"mappings":"kHAAA,0LAWO,SAASA,IACZ,OAAOC,eAAQ,CACXC,IAAK,kBACLC,OAAQ,QAKT,SAASC,IACZ,OAAOH,eAAQ,CACXC,IAAK,iBACLC,OAAQ,QAIT,SAASE,EAAcC,EAAMC,GAChC,IAAIL,EAAG,0BAAqBI,GAI5B,OAHIC,GAAQA,EAAKC,UACbN,EAAM,GAAH,OAAMA,EAAN,oBAAqBK,EAAKC,UAE1BP,eAAQ,CACfC,MACAC,OAAQ,QAKL,SAASM,EAAiBC,EAAMC,GACnC,IAAIT,EAAM,uBAAH,OAA0BQ,EAA1B,sBAA4CC,GACnD,OAAOV,eAAQ,CACXC,MACAC,OAAQ,QAKT,SAASS,EAAiBC,GAC7B,IAAIX,EAAM,uBACV,OAAOD,eAAQ,CACXC,MACAC,OAAQ,OACRU,W,yCCpDR,IAAIC,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAsB,WAAfJ,EAAIK,OAAsB,GAAK,uBAAwB,CAACH,EAAG,WAAW,CAACI,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOT,EAAIU,QAASC,WAAW,YAAYC,MAAM,CAAC,OAAS,GAAG,KAAOZ,EAAIa,YAAY,CAACX,EAAG,kBAAkB,CAACU,MAAM,CAAC,KAAO,UAAUE,YAAYd,EAAIe,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAChB,EAAG,UAAU,CAACU,MAAM,CAAC,OAAS,GAAG,MAAQ,SAAS,CAACV,EAAG,eAAe,CAACU,MAAM,CAAC,MAAQ,UAAU,CAACV,EAAG,OAAO,CAACF,EAAImB,GAAGnB,EAAIoB,GAAGF,EAAMG,IAAIC,MAAMC,KAAK,YAAY,GAAGrB,EAAG,UAAU,CAACU,MAAM,CAAC,OAAS,GAAG,MAAQ,SAAS,CAACV,EAAG,eAAe,CAACU,MAAM,CAAC,MAAQ,YAAY,CAACV,EAAG,OAAO,CAACF,EAAImB,GAAGnB,EAAIoB,GAAGF,EAAMG,IAAIG,eAAe,GAAIN,EAAMG,IAAII,QAAQC,OAAS,EAAGxB,EAAG,UAAU,CAACU,MAAM,CAAC,OAAS,GAAG,MAAQ,SAAS,CAACV,EAAG,eAAe,CAACU,MAAM,CAAC,MAAQ,YAAY,CAACV,EAAG,OAAO,CAACF,EAAImB,GAAGnB,EAAIoB,GAAGF,EAAMG,IAAII,QAAQF,KAAK,YAAY,GAAGvB,EAAI2B,YAAYzB,EAAG,kBAAkB,CAACU,MAAM,CAAC,MAAQ,SAAS,MAAQ,KAAK,KAAO,QAAQ,MAAQZ,EAAI4B,eAAe1B,EAAG,kBAAkB,CAACU,MAAM,CAAC,MAAQ,SAAS,KAAO,aAAa,MAAQZ,EAAI6B,GAAG,0BAA0B3B,EAAG,kBAAkB,CAACU,MAAM,CAAC,MAAQ,SAAS,MAAQ,MAAM,KAAO,MAAM,MAAQZ,EAAI6B,GAAG,sBAAsB3B,EAAG,kBAAkB,CAACU,MAAM,CAAC,MAAQ,SAAS,MAAQ,MAAM,KAAO,iBAAiB,MAAQ,QAAQV,EAAG,kBAAkB,CAACU,MAAM,CAAC,MAAQ,SAAS,MAAQ,MAAM,MAAQ,MAAME,YAAYd,EAAIe,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASa,GAAO,MAAO,CAAC5B,EAAG,YAAY,CAACU,MAAM,CAAC,KAAO,WAAWmB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhC,EAAIiC,aAAaH,EAAMT,IAAIa,eAAe,CAAClC,EAAImB,GAAG,gBAAgB,GAAGjB,EAAG,MAAM,CAACiC,YAAY,wBAAwB,CAACjC,EAAG,gBAAgB,CAACU,MAAM,CAAC,OAAS,2BAA2B,aAAa,CAAC,GAAI,GAAI,GAAI,KAAK,YAAYZ,EAAIoC,WAAWxC,SAAS,eAAeI,EAAIoC,WAAWzC,MAAMoC,GAAG,CAAC,cAAc/B,EAAIqC,iBAAiB,iBAAiBrC,EAAIsC,wBAAwB,IAAI,IAEt3DC,EAAkB,G,gpBCkDtB,OACAhC,kBACAT,KAFA,WAGA,OACAY,WACAG,aACAuB,YACAzC,OACAC,eAIA4C,cACAC,gBACA,YAGAC,QAjBA,WAkBA,uBAEAC,SACAC,eADA,WACA,2KACA,gBACAlD,sCACA,SACA,oBAEA,aACAmD,6BACA,sCACA,qBACA,QACAC,OAAA,YACA,aACAC,mBAGAV,iBAjBA,SAiBAzC,GACA,2BACA,uBAEA0C,oBArBA,SAqBA3C,GACA,uBACA,uBAEAiC,YAzBA,SAyBAoB,GACA,8DAEAf,aA5BA,SA4BAgB,GAAA,WACApD,gBACAqC,eACAgB,MAAA,YACA,aACA,YACA,WACAC,6BACAC,0BACA7D,sBAKA8D,cA9DA,WA+DAR,kCCnHkX,I,YCO9WS,EAAY,eACd,EACAvD,EACAwC,GACA,EACA,KACA,KACA,MAIa,aAAAe,E","file":"js/chunk-7bcb64fb.3b0b959a.js","sourcesContent":["import request from '@/utils/request'\n\n// 全局数据接口\nexport function fetchGlobalData() {\n  return request({\n    url: 'global',\n    method: 'get',\n  })\n}\n\n// livetime接口\nexport function fetchLiveTimeData() {\n    return request({\n        url: 'global/livetime',\n        method: 'get',\n    })\n}\n\n// overall接口\nexport function fetchOverallData() {\n    return request({\n        url: 'global/overall',\n        method: 'get',\n    })\n}\n\nexport function fetchLiveData(type, opts) {\n    let url =`global/num?type=${type}`\n    if (opts && opts.country) {\n        url = `${url}&country=${opts.country}`\n    }\n    return request({\n    url,\n    method: 'get'\n  })\n}\n\n// 全局热门频道\nexport function fetchHotChannels(page, pageSize) {\n    let url = `global/channel?page=${page}&page_size=${pageSize}`\n    return request({\n        url,\n        method: 'get'\n    })\n}\n\n// 全局热门频道拆分\nexport function splitHotChannels(data) {\n    let url = `global/channel/split`\n    return request({\n        url,\n        method: 'post',\n        data,\n    })\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{style:(_vm.device === 'mobile' ? '' : 'padding: 30px 120px')},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"border\":\"\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{attrs:{\"inline\":\"\",\"align\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"users\"}},[_c('span',[_vm._v(_vm._s(props.row.users.join(' ')))])])],1),_c('el-form',{attrs:{\"inline\":\"\",\"align\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"channel\"}},[_c('span',[_vm._v(_vm._s(props.row.channel))])])],1),(props.row.columns.length > 1)?_c('el-form',{attrs:{\"inline\":\"\",\"align\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"columns\"}},[_c('span',[_vm._v(_vm._s(props.row.columns.join('+')))])])],1):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"50\",\"type\":\"index\",\"index\":_vm.indexMethod}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"channel_id\",\"label\":_vm.$t('hotChannels.content')}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"100\",\"prop\":\"num\",\"label\":_vm.$t('hotChannels.num')}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"100\",\"prop\":\"columns.length\",\"label\":\"槽数\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"100\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.splitChannel(scope.row.channel_id)}}},[_vm._v(\"拆分\")])]}}])})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"layout\":\"sizes, prev, pager, next\",\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.tableParam.pageSize,\"current-page\":_vm.tableParam.page},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div :style=\"device === 'mobile' ? '' : 'padding: 30px 120px'\">\n        <el-table border :data=\"tableData\" v-loading=\"loading\">\n            <el-table-column type=\"expand\">\n                <template slot-scope=\"props\">\n                    <el-form  inline align=\"left\">\n                        <el-form-item  label=\"users\">\n                            <span>{{ props.row.users.join(' ') }}</span>\n                        </el-form-item>\n                    </el-form>\n                    <el-form  inline align=\"left\">\n                      <el-form-item  label=\"channel\">\n                        <span>{{ props.row.channel }}</span>\n                      </el-form-item>\n                    </el-form>\n                    <el-form v-if=\"props.row.columns.length > 1\" inline align=\"left\">\n                        <el-form-item  label=\"columns\">\n                            <span>{{ props.row.columns.join('+') }}</span>\n                        </el-form-item>\n                    </el-form>\n                </template>\n            </el-table-column>\n            <el-table-column align=\"center\" width=\"50\" type=\"index\" :index=\"indexMethod\"></el-table-column>\n            <el-table-column align=\"center\" prop=\"channel_id\" :label=\"$t('hotChannels.content')\"></el-table-column>\n            <el-table-column align=\"center\" width=\"100\" prop=\"num\" :label=\"$t('hotChannels.num')\"></el-table-column>\n            <el-table-column align=\"center\" width=\"100\" prop=\"columns.length\" label=\"槽数\"></el-table-column>\n            <el-table-column align=\"center\" width=\"100\" label=\"操作\">\n               <template slot-scope=\"scope\">\n                 <el-button type=\"primary\" @click=\"splitChannel(scope.row.channel_id)\">拆分</el-button>\n               </template>\n            </el-table-column>\n\n        </el-table>\n\n        <div class=\"pagination-container\">\n            <el-pagination\n                    layout=\"sizes, prev, pager, next\"\n                    :page-sizes=\"[10, 20, 50, 100]\"\n                    :page-size=\"tableParam.pageSize\"\n                    :current-page=\"tableParam.page\"\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\">\n            </el-pagination>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import { fetchHotChannels, splitHotChannels } from '@/api/liveData'\n    import { mapGetters } from 'vuex'\n\n    export default {\n        name: 'hotChannel',\n        data() {\n            return {\n                loading: false,\n                tableData: [],\n                tableParam: {\n                    page: 1,\n                    pageSize: 10\n                },\n            }\n        },\n        computed: {\n            ...mapGetters([\n                'device'\n            ])\n        },\n        mounted() {\n            this.fetchTableData()\n        },\n        methods: {\n            fetchTableData(page=this.tableParam.page, pageSize=this.tableParam.pageSize) {\n                this.loading = true\n                fetchHotChannels(page, pageSize).then(res => {\n                    if(res.data) {\n                        this.tableData = res.data\n                    }\n                    this.loading = false\n                    window.clearTimeout(this.timer)\n                    this.timer = window.setTimeout(() => {\n                        this.fetchTableData()\n                    }, 20000)\n                }).catch(err => {\n                    this.loading = false\n                    console.log(err)\n                })\n            },\n            handleSizeChange(pageSize) {\n                this.tableParam.pageSize = pageSize\n                this.fetchTableData()\n            },\n            handleCurrentChange(page) {\n                this.tableParam.page = page\n                this.fetchTableData()\n            },\n            indexMethod(index) {\n                return index + (this.tableParam.page-1)*this.tableParam.pageSize + 1;\n            },\n            splitChannel(channelId) {\n              splitHotChannels({\n                channel_id: channelId,\n              }).then(res => {\n                const data = res.data\n                const { columns } = data\n                this.$notify({\n                  title: this.$t('common.success'),\n                  message: `当前槽数：${columns}`,\n                  type: 'success'\n                });\n              })\n            }\n        },\n        beforeDestroy() {\n            window.clearTimeout(this.timer)\n        }\n    }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hotChannel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hotChannel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./hotChannel.vue?vue&type=template&id=b372a6a0&\"\nimport script from \"./hotChannel.vue?vue&type=script&lang=js&\"\nexport * from \"./hotChannel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}