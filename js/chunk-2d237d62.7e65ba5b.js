(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237d62"],{fd8f:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-input",{staticStyle:{width:"350px","margin-right":"5px"},attrs:{placeholder:"worker pid, url or number"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("template",{slot:"prepend"},[e("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"Select"},slot:"prepend",model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[e("el-option",{attrs:{label:"Restart",value:"restart"}}),e("el-option",{attrs:{label:"Kill",value:"stop"}}),e("el-option",{attrs:{label:"Workers",value:"ping"}})],1)],1)],2),e("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.doAction()}}},[t._v(t._s(t.$t("common.ok")))])],1),e("vue-json-pretty",{attrs:{showIcon:"",showLineNumber:"",showDoubleQuotes:!1,data:t.jsonData}})],1)},o=[],r=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("456d"),n("ac6a"),n("c5f6"),n("28a5"),n("bc3a")),i=n.n(r),s=n("6be8"),c=n("76f1"),l=n.n(c);n("8a0d");function u(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=d(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function d(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var p={name:"AdminSeederStats",components:{VueJsonPretty:l.a},data:function(){return{loading:!1,url:"",accessToken:"",jsonData:{},action:"",value:""}},mounted:function(){var t=this,e=this.$route.query,n=e.url,a=e.accessToken;this.url=n,this.accessToken=a,this.getStats(),this.timer=setInterval((function(){t.getStats()}),2e4)},methods:{doAction:function(){var t=this;if(this.loading=!0,"restart"===this.action||"stop"===this.action){var e,n=this.value.split(" ").filter((function(t){return!!t})).map((function(t){return Number(t)})),a=u(n);try{for(a.s();!(e=a.n()).done;){var o=e.value;i.a.post("".concat(this.url,"/").concat(this.action,"/").concat(o),{},{headers:{"X-Access-Token":this.accessToken||void 0}}).finally((function(){t.loading=!1}))}}catch(r){a.e(r)}finally{a.f()}}else"ping"===this.action&&i.a.post("".concat(this.url,"/").concat(this.action),{workers:Number(this.value)},{headers:{"X-Access-Token":this.accessToken||void 0}}).finally((function(){t.loading=!1}));this.value="",this.action=""},getStats:function(){var t=this;this.loading=!0,i.a.get(this.url+"/stats",{headers:{"X-Access-Token":this.accessToken||void 0}}).then((function(e){var n=e.data,a=n.master,o=n.workers;a.memory=t.formatValue(a.memory),a.averageUplink&&(a.averageUplink="".concat(Math.round(a.averageUplink),"Mbps")),o&&Object.keys(o).forEach((function(e){var n=o[e];n.seedFrom&&(n.seedFrom=new Date(n.seedFrom),n.uploaded=t.formatValue(n.uploaded),n.downloaded=t.formatValue(n.downloaded)),n.averageUplink&&(n.averageUplink="".concat(Math.round(n.averageUplink),"Mbps")),n.diskCacheSize&&(n.diskCacheSize=t.formatValue(n.diskCacheSize)),n.memory&&(n.memory=t.formatValue(n.memory))})),t.jsonData=n})).finally((function(){t.loading=!1}))},formatValue:function(t){var e=Object(s["c"])(t);return"".concat(e.num).concat(e.unit)}},beforeDestroy:function(){clearInterval(this.timer)}},h=p,m=n("2877"),v=Object(m["a"])(h,a,o,!1,null,"53cf68a0",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d237d62.7e65ba5b.js.map