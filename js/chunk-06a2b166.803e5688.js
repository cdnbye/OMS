(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06a2b166"],{"25e9":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("el-form",{ref:"resetForm",staticClass:"login-form",attrs:{model:e.resetForm,rules:e.resetRules,"auto-complete":"on","label-position":"left"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v(e._s(e.$t("passwdReset.title")))]),t("lang-select",{staticClass:"set-language"}),t("select-zone",{staticClass:"console"})],1),t("el-form-item",{attrs:{prop:"email"}},[t("span",{staticClass:"svg-container svg-container_login"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{attrs:{placeholder:e.$t("passwdReset.email"),name:"email",type:"text","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSendCode.apply(null,arguments)}},model:{value:e.resetForm.email,callback:function(t){e.$set(e.resetForm,"email",t)},expression:"resetForm.email"}})],1),t("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{id:"sendButton",loading:e.sendLoading,disabled:e.sendDisabled,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.onSendCode.apply(null,arguments)}}},[e._v(e._s(e.$t("passwdReset.send")))]),t("el-form-item",{attrs:{prop:"Vcode"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{attrs:{placeholder:e.$t("passwdReset.vcode"),name:"Vcode","auto-complete":"on"},model:{value:e.resetForm.Vcode,callback:function(t){e.$set(e.resetForm,"Vcode",t)},expression:"resetForm.Vcode"}})],1),t("el-form-item",{attrs:{prop:"Passwd"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{attrs:{type:e.passwordType,placeholder:e.$t("passwdReset.password"),name:"Passwd","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSignup.apply(null,arguments)}},model:{value:e.resetForm.Passwd,callback:function(t){e.$set(e.resetForm,"Passwd",t)},expression:"resetForm.Passwd"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),e.captchaUrl?t("el-form-item",{attrs:{prop:"captcha"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"lock"}})],1),t("el-input",{attrs:{type:"text",placeholder:e.$t("login.code"),name:"captcha"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleReset.apply(null,arguments)}},model:{value:e.resetForm.captcha_value,callback:function(t){e.$set(e.resetForm,"captcha_value",t)},expression:"resetForm.captcha_value"}})],1):e._e(),t("img",{attrs:{src:e.captchaUrl},on:{click:e.getImage}}),t("el-row",{attrs:{type:"flex",justify:"space-between"}},[t("a",{staticStyle:{color:"#eee"},on:{click:e.goLogin}},[e._v(e._s(e.$t("auth.login")))]),t("a",{staticStyle:{color:"#eee"},on:{click:e.goSignup}},[e._v(e._s(e.$t("auth.signup")))])]),t("el-button",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{loading:e.resetLoading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleReset.apply(null,arguments)}}},[e._v(e._s(e.$t("passwdReset.submit")))])],1)],1)},n=[],o=s("61f7"),r=s("3786"),c=s("b811"),i=s("1131"),l=s("ed08"),d=s("85a9"),u={name:"PasswdReset",components:{LangSelect:i["a"],SelectZone:c["a"]},data:function(){var e=this,t=function(t,s,a){if(Object(o["a"])(s))a();else{var n=e.$t("auth.mailError");a(new Error(n))}},s=function(t,s,a){if(s.length<6||s.length>18){var n=e.$t("auth.passwdError");a(new Error(n))}else a()},a=function(t,s,a){if(s.length<4){var n=e.$t("auth.vcodeError");a(new Error(n))}else a()};return{resetForm:{email:"",Passwd:"",Vcode:"",captcha_id:"",captcha_value:""},resetRules:{email:[{required:!0,trigger:"blur",validator:t}],Passwd:[{required:!0,trigger:"blur",validator:s}],Vcode:[{required:!0,trigger:"blur",validator:a}]},passwordType:"password",resetLoading:!1,sendLoading:!1,sendDisabled:!1,redirect:void 0,int:void 0,captchaUrl:""}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{getImage:function(){var e=this;Object(d["a"])(this.resetForm.captcha_id).then((function(t){var s=t.data;s&&(e.resetForm.captcha_id=s.captcha_id,e.captchaUrl=s.captcha_url)}))},showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},handleReset:function(){var e=this;Object(l["a"])()&&this.$refs.resetForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.resetLoading=!0,Object(r["b"])(e.resetForm).then((function(){e.resetLoading=!1;var t=e.$t("passwdReset.successTitle");e.$message({message:t,type:"success"}),e.$router.push({path:"/login"})})).catch((function(t){e.resetLoading=!1,4005!==t.code&&4019!==t.code||e.getImage()}))}))},onSendCode:function(){var e=this;if(Object(l["a"])()){var t=this.resetForm.email;if(t)if(Object(o["a"])(t)){var s={email:t,action:"passwd_forget"};this.sendLoading=!0,Object(r["c"])(s).then((function(t){e.sendLoading=!1;var s=e.$t("auth.sendTitle");e.$message({message:s,type:"success"}),e.sendButtonEnable()})).catch((function(t){e.sendLoading=!1}))}else{var a=this.$t("auth.mailError");this.$message.error(a)}else{var n=this.$t("auth.mailError");this.$message.error(n)}}},goLogin:function(){this.$router.push({path:"/login"})},goSignup:function(){this.$router.push({path:"/signup"})},sendButtonEnable:function(){var e=300,t=document.getElementById("sendButton"),s=this;s.int=setInterval((function(){s.sendDisabled=!0,e--,e>0?t.innerHTML=e+" S":(t.innerHTML=s.$t("signup.send"),s.sendDisabled=!1,clearInterval(s.int),s.int=void 0)}),1e3)}}},p=u,h=(s("b6fb"),s("a624"),s("2877")),m=Object(h["a"])(p,a,n,!1,null,"c6f8dafa",null);t["default"]=m.exports},"663b":function(e,t,s){},"6de9":function(e,t,s){"use strict";s("663b")},"797c":function(e,t,s){},"85a9":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s("b775");function n(e){var t="captcha";return e&&(t="".concat(t,"?last=").concat(e)),Object(a["a"])({url:t,method:"get"})}},a624:function(e,t,s){"use strict";s("797c")},b6fb:function(e,t,s){"use strict";s("eb76")},b811:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-dropdown",{attrs:{"hide-on-click":!1},on:{command:e.handleConsoleSelect}},[t("span",{staticClass:"el-dropdown-link",style:!0===e.showRed?{color:"#f56c6c"}:""},[e._v("\n          "+e._s(e.selectedText)),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"p1"}},[e._v(e._s(e.$t("auth.consoleEU")))]),t("el-dropdown-item",{attrs:{command:"p3"}},[e._v(e._s(e.$t("auth.consoleHK")))]),t("el-dropdown-item",{attrs:{command:"p2"}},[e._v(e._s(e.$t("auth.consoleUSA")))]),e.showLocal?t("el-dropdown-item",{attrs:{command:"d1"}},[e._v("Localhost")]):e._e()],1)],1)},n=[],o=s("267e"),r=s("5d2d"),c=s("b775"),i={name:"SelectZone",data:function(){return{selectedZone:"",showRed:!1,showLocal:!1}},mounted:function(){this.checkSelected(),"localhost"===location.hostname&&(this.showLocal=!0)},computed:{selectedText:function(){return this.checkSelected(),this.selectedZone||this.$t("auth.console")}},methods:{checkSelected:function(e){this.showRed=!1,e||(e=Object(r["a"])(o["b"])),"p1"===e?this.selectedZone=this.$t("navbar.currZone")+this.$t("auth.consoleEU"):"p3"===e?this.selectedZone=this.$t("navbar.currZone")+this.$t("auth.consoleHK"):"p2"===e?this.selectedZone=this.$t("navbar.currZone")+this.$t("auth.consoleUSA"):"d1"===e?this.selectedZone=this.$t("navbar.currZone")+"local":this.showRed=!0},handleConsoleSelect:function(e){this.checkSelected(e),c["a"].defaults.baseURL=o["a"][e],Object(r["c"])(o["b"],e)}}},l=i,d=(s("6de9"),s("2877")),u=Object(d["a"])(l,a,n,!1,null,"7d7769b8",null);t["a"]=u.exports},eb76:function(e,t,s){}}]);
//# sourceMappingURL=chunk-06a2b166.803e5688.js.map