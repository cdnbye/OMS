{"version":3,"sources":["webpack:///./src/views/dashboard/user/hotChannel.vue","webpack:///src/views/dashboard/user/hotChannel.vue","webpack:///./src/views/dashboard/user/hotChannel.vue?baef","webpack:///./src/views/dashboard/user/hotChannel.vue?28a3","webpack:///./src/api/user/liveData.js"],"names":["render","_vm","this","_c","_self","style","device","staticStyle","attrs","$t","directives","name","rawName","value","loading","expression","tableData","indexMethod","staticClass","tableParam","pageSize","page","on","handleSizeChange","handleCurrentChange","staticRenderFns","data","computed","mapGetters","mounted","methods","fetchTableData","fetchHotChannels","window","catch","console","index","beforeDestroy","component","fetchGlobalData","uid","domainID","hostId","url","request","method","fetchDisData","type","lang","fetchGeoDis","country"],"mappings":"yHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAsB,WAAfJ,EAAIK,OAAsB,GAAK,uBAAwB,CAACH,EAAG,WAAW,CAACI,YAAY,CAAC,gBAAgB,QAAQC,MAAM,CAAC,MAAQP,EAAIQ,GAAG,uBAAuBN,EAAG,WAAW,CAACO,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOZ,EAAIa,QAASC,WAAW,YAAYP,MAAM,CAAC,OAAS,GAAG,KAAOP,EAAIe,YAAY,CAACb,EAAG,kBAAkB,CAACK,MAAM,CAAC,MAAQ,SAAS,MAAQ,KAAK,KAAO,QAAQ,MAAQP,EAAIgB,eAAed,EAAG,kBAAkB,CAACK,MAAM,CAAC,MAAQ,SAAS,KAAO,UAAU,MAAQP,EAAIQ,GAAG,0BAA0BN,EAAG,kBAAkB,CAACK,MAAM,CAAC,MAAQ,SAAS,MAAQ,MAAM,KAAO,MAAM,MAAQP,EAAIQ,GAAG,uBAAuB,GAAGN,EAAG,MAAM,CAACe,YAAY,wBAAwB,CAACf,EAAG,gBAAgB,CAACK,MAAM,CAAC,OAAS,2BAA2B,aAAa,CAAC,GAAI,GAAI,GAAI,KAAK,YAAYP,EAAIkB,WAAWC,SAAS,eAAenB,EAAIkB,WAAWE,MAAMC,GAAG,CAAC,cAAcrB,EAAIsB,iBAAiB,iBAAiBtB,EAAIuB,wBAAwB,IAAI,IAE1+BC,EAAkB,G,4pBC0BtB,OACAd,kBACAe,KAFA,WAGA,OACAZ,WACAE,aACAG,YACAE,OACAD,eAIAO,cACAC,gBACA,YAGAC,QAjBA,WAkBA,uBAEAC,SACAC,eADA,WACA,2KACA,gBACAC,uDACA,SACA,oBAEA,aACAC,6BACA,sCACA,qBACA,QACAC,OAAA,YACA,aACAC,mBAGAZ,iBAjBA,SAiBAH,GACA,2BACA,uBAEAI,oBArBA,SAqBAH,GACA,uBACA,uBAEAJ,YAzBA,SAyBAmB,GACA,+DAGAC,cAjDA,WAkDAJ,kCC9EkX,I,YCO9WK,EAAY,eACd,EACAtC,EACAyB,GACA,EACA,KACA,KACA,MAIa,aAAAa,E,2CClBf,wJAGO,SAASC,EAAgBC,EAAKC,EAAUC,GAC7C,IAAIC,EAAM,gBAAH,OAAmBH,EAAnB,6BAA2CC,GAIlD,OAHIC,IACFC,EAAM,GAAH,OAAMA,EAAN,oBAAqBD,IAEnBE,eAAQ,CACbD,MACAE,OAAQ,QAKL,SAASC,EAAaN,EAAKC,EAAUM,EAAML,EAAQM,GACxD,IAAIL,EAAM,gBAAH,OAAmBH,EAAnB,6BAA2CC,EAA3C,qBAAgEM,GAOvE,OANIL,IACFC,EAAM,GAAH,OAAMA,EAAN,oBAAqBD,IAEtBM,IACAL,EAAM,GAAH,OAAMA,EAAN,iBAAkBK,IAElBJ,eAAQ,CACbD,MACAE,OAAQ,QAaL,SAASI,EAAYT,EAAKC,EAAUM,EAAMG,GAC/C,IAAIP,EAAM,gBAAH,OAAmBH,EAAnB,6BAA2CC,EAA3C,qBAAgEM,GAIvE,OAHIG,IACFP,EAAM,GAAH,OAAMA,EAAN,oBAAqBO,IAEnBN,eAAQ,CACbD,MACAE,OAAQ,QAKL,SAASb,EAAiBQ,EAAKnB,EAAMD,GACxC,IAAIuB,EAAM,gBAAH,OAAmBH,EAAnB,yBAAuCnB,EAAvC,sBAAyDD,GAChE,OAAOwB,eAAQ,CACXD,MACAE,OAAQ","file":"js/chunk-033ccf4d.948479bc.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{style:(_vm.device === 'mobile' ? '' : 'padding: 30px 120px')},[_c('el-alert',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"title\":_vm.$t('hotChannels.desc')}}),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"border\":\"\",\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"50\",\"type\":\"index\",\"index\":_vm.indexMethod}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"channel\",\"label\":_vm.$t('hotChannels.content')}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"width\":\"150\",\"prop\":\"num\",\"label\":_vm.$t('hotChannels.num')}})],1),_c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"layout\":\"sizes, prev, pager, next\",\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.tableParam.pageSize,\"current-page\":_vm.tableParam.page},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div :style=\"device === 'mobile' ? '' : 'padding: 30px 120px'\">\n        <el-alert :title=\"$t('hotChannels.desc')\" style=\"margin-bottom: 20px\" />\n        <el-table border :data=\"tableData\" v-loading=\"loading\">\n            <el-table-column align=\"center\" width=\"50\" type=\"index\" :index=\"indexMethod\"></el-table-column>\n            <el-table-column align=\"center\" prop=\"channel\" :label=\"$t('hotChannels.content')\"></el-table-column>\n            <el-table-column align=\"center\" width=\"150\" prop=\"num\" :label=\"$t('hotChannels.num')\"></el-table-column>\n        </el-table>\n\n        <div class=\"pagination-container\">\n            <el-pagination\n                    layout=\"sizes, prev, pager, next\"\n                    :page-sizes=\"[10, 20, 50, 100]\"\n                    :page-size=\"tableParam.pageSize\"\n                    :current-page=\"tableParam.page\"\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\">\n            </el-pagination>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import { fetchHotChannels } from '@/api/user/liveData'\n    import { mapGetters } from 'vuex'\n    import { getID } from '@/utils/auth'\n\n    export default {\n        name: 'hotChannel',\n        data() {\n            return {\n                loading: false,\n                tableData: [],\n                tableParam: {\n                    page: 1,\n                    pageSize: 10\n                },\n            }\n        },\n        computed: {\n            ...mapGetters([\n                'device'\n            ])\n        },\n        mounted() {\n            this.fetchTableData()\n        },\n        methods: {\n            fetchTableData(page=this.tableParam.page, pageSize=this.tableParam.pageSize) {\n                this.loading = true\n                fetchHotChannels(getID(), page, pageSize).then(res => {\n                    if(res.data) {\n                        this.tableData = res.data\n                    }\n                    this.loading = false\n                    window.clearTimeout(this.timer)\n                    this.timer = window.setTimeout(() => {\n                        this.fetchTableData()\n                    }, 20000)\n                }).catch(err => {\n                    this.loading = false\n                    console.log(err)\n                })\n            },\n            handleSizeChange(pageSize) {\n                this.tableParam.pageSize = pageSize\n                this.fetchTableData()\n            },\n            handleCurrentChange(page) {\n                this.tableParam.page = page\n                this.fetchTableData()\n            },\n            indexMethod(index) {\n                return index + (this.tableParam.page-1)*this.tableParam.pageSize + 1;\n            }\n        },\n        beforeDestroy() {\n            window.clearTimeout(this.timer)\n        }\n    }\n</script>\n\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hotChannel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hotChannel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./hotChannel.vue?vue&type=template&id=fc2d8b08&\"\nimport script from \"./hotChannel.vue?vue&type=script&lang=js&\"\nexport * from \"./hotChannel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\n\n// 管理员查看用户全局概览数据\nexport function fetchGlobalData(uid, domainID, hostId) {\n  let url = `user/user_id/${uid}/domain/domain_id/${domainID}`\n  if (hostId) {\n    url = `${url}?host_id=${hostId}`\n  }\n  return request({\n    url,\n    method: 'get',\n  })\n}\n\n// 管理员查看用户的分布图数据\nexport function fetchDisData(uid, domainID, type, hostId, lang) {\n  let url = `user/user_id/${uid}/domain/domain_id/${domainID}/num?type=${type}`\n  if (hostId) {\n    url = `${url}&host_id=${hostId}`\n  }\n  if (lang) {\n      url = `${url}&lang=${lang}`\n  }\n  return request({\n    url,\n    method: 'get',\n  })\n}\n\n// 用户全局概览数据\nexport function fetchNum(uid, domainID, start, end) {\n  return request({\n    url: `user/user_id/${uid}/domain/domain_id/${domainID}/num?start_ts=${start}&end_ts=${end}&gran=5`,\n    method: 'get',\n  })\n}\n\n// 用户分布图数据\nexport function fetchGeoDis(uid, domainID, type, country) {\n  let url = `user/user_id/${uid}/domain/domain_id/${domainID}/num?type=${type}`;\n  if (country) {\n    url = `${url}&country=${country}`\n  }\n  return request({\n    url,\n    method: 'get',\n  })\n}\n\n// 用户热门频道\nexport function fetchHotChannels(uid, page, pageSize) {\n    let url = `user/user_id/${uid}/channel?page=${page}&page_size=${pageSize}`\n    return request({\n        url,\n        method: 'get'\n    })\n}\n"],"sourceRoot":""}